-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.accounts (
  id uuid NOT NULL DEFAULT uuid_generate_v4(),
  user_id uuid NOT NULL,
  account_number text NOT NULL UNIQUE,
  account_type text DEFAULT 'checking'::text,
  currency text DEFAULT 'USD'::text,
  balance numeric DEFAULT 0.00,
  available_balance numeric DEFAULT 0.00,
  status text DEFAULT 'active'::text CHECK (status = ANY (ARRAY['active'::text, 'frozen'::text, 'closed'::text, 'suspended'::text])),
  overdraft_limit numeric DEFAULT 0.00,
  daily_transaction_limit numeric DEFAULT 10000.00,
  monthly_transaction_limit numeric DEFAULT 100000.00,
  iban text UNIQUE,
  swift_code text,
  is_deleted boolean DEFAULT false,
  deleted_at timestamp with time zone,
  deleted_reason text,
  deleted_by uuid,
  metadata jsonb DEFAULT '{}'::jsonb,
  feature_flags jsonb DEFAULT '{}'::jsonb,
  settings jsonb DEFAULT '{}'::jsonb,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  closed_at timestamp with time zone,
  CONSTRAINT accounts_pkey PRIMARY KEY (id),
  CONSTRAINT accounts_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.user_profiles(id),
  CONSTRAINT accounts_deleted_by_fkey FOREIGN KEY (deleted_by) REFERENCES public.user_profiles(id)
);
CREATE TABLE public.admin_audit_logs (
  id uuid NOT NULL DEFAULT uuid_generate_v4(),
  admin_id uuid NOT NULL,
  action text NOT NULL,
  resource_type text NOT NULL,
  resource_id uuid NOT NULL,
  old_value jsonb,
  new_value jsonb,
  reason text,
  ip_address inet,
  user_agent text,
  status text DEFAULT 'success'::text CHECK (status = ANY (ARRAY['success'::text, 'failure'::text])),
  error_details text,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT admin_audit_logs_pkey PRIMARY KEY (id),
  CONSTRAINT admin_audit_logs_admin_id_fkey FOREIGN KEY (admin_id) REFERENCES public.user_profiles(id)
);
CREATE TABLE public.codes (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id uuid,
  code_type character varying NOT NULL,
  code character varying NOT NULL,
  email character varying,
  phone character varying,
  expires_at timestamp with time zone NOT NULL,
  is_used boolean DEFAULT false,
  used_at timestamp with time zone,
  used_by_user_id uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  metadata jsonb DEFAULT '{}'::jsonb,
  CONSTRAINT codes_pkey PRIMARY KEY (id),
  CONSTRAINT codes_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id),
  CONSTRAINT codes_used_by_user_id_fkey FOREIGN KEY (used_by_user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.contact_submissions (
  id bigint NOT NULL DEFAULT nextval('contact_submissions_id_seq'::regclass),
  full_name character varying NOT NULL,
  email character varying NOT NULL,
  phone character varying NOT NULL,
  subject character varying NOT NULL,
  category character varying NOT NULL,
  message text NOT NULL,
  ip_address character varying,
  user_agent text,
  submitted_at timestamp with time zone DEFAULT now(),
  status character varying DEFAULT 'new'::character varying,
  admin_notes text,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT contact_submissions_pkey PRIMARY KEY (id)
);
CREATE TABLE public.feature_flags (
  id uuid NOT NULL DEFAULT uuid_generate_v4(),
  flag_name text NOT NULL UNIQUE,
  flag_key text NOT NULL UNIQUE,
  is_enabled boolean DEFAULT false,
  applies_to text DEFAULT 'all'::text,
  metadata jsonb DEFAULT '{}'::jsonb,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT feature_flags_pkey PRIMARY KEY (id)
);
CREATE TABLE public.inbound_emails (
  id uuid NOT NULL DEFAULT uuid_generate_v4(),
  from_address text NOT NULL,
  to_address text NOT NULL,
  subject text NOT NULL,
  body text,
  html_body text,
  message_id text UNIQUE,
  thread_id text,
  user_id uuid,
  email_type text,
  status text DEFAULT 'received'::text CHECK (status = ANY (ARRAY['received'::text, 'processing'::text, 'processed'::text, 'error'::text, 'archived'::text])),
  classification_score smallint,
  spam_score smallint,
  is_spam boolean DEFAULT false,
  raw_headers jsonb,
  attachments jsonb DEFAULT '[]'::jsonb,
  processing_error text,
  processed_at timestamp with time zone,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT inbound_emails_pkey PRIMARY KEY (id),
  CONSTRAINT inbound_emails_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.user_profiles(id)
);
CREATE TABLE public.transactions (
  id uuid NOT NULL DEFAULT uuid_generate_v4(),
  from_account_id uuid NOT NULL,
  to_account_id uuid,
  external_recipient_name text,
  external_recipient_iban text,
  amount numeric NOT NULL CHECK (amount > 0::numeric),
  currency text NOT NULL,
  transaction_type text DEFAULT 'transfer'::text,
  status text DEFAULT 'pending'::text CHECK (status = ANY (ARRAY['pending'::text, 'completed'::text, 'failed'::text, 'reversed'::text, 'on_hold'::text])),
  description text,
  reference_number text UNIQUE,
  initiated_by_user_id uuid,
  initiated_by_admin_id uuid,
  approved_by_admin_id uuid,
  approved_at timestamp with time zone,
  failure_reason text,
  metadata jsonb DEFAULT '{}'::jsonb,
  related_transaction_id uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  completed_at timestamp with time zone,
  reversal_id uuid,
  is_reversed boolean DEFAULT false,
  CONSTRAINT transactions_pkey PRIMARY KEY (id),
  CONSTRAINT transactions_from_account_id_fkey FOREIGN KEY (from_account_id) REFERENCES public.accounts(id),
  CONSTRAINT transactions_to_account_id_fkey FOREIGN KEY (to_account_id) REFERENCES public.accounts(id),
  CONSTRAINT transactions_initiated_by_user_id_fkey FOREIGN KEY (initiated_by_user_id) REFERENCES public.user_profiles(id)
);
CREATE TABLE public.user_profiles (
  id uuid NOT NULL,
  email text NOT NULL UNIQUE,
  full_name text NOT NULL,
  phone_number text,
  date_of_birth date,
  nationality text,
  address text,
  city text,
  postal_code text,
  country text,
  kyc_status text DEFAULT 'pending'::text CHECK (kyc_status = ANY (ARRAY['pending'::text, 'verified'::text, 'rejected'::text, 'suspended'::text])),
  kyc_verified_at timestamp with time zone,
  kyc_document_id text,
  risk_score smallint DEFAULT 0 CHECK (risk_score >= 0 AND risk_score <= 100),
  is_active boolean DEFAULT true,
  is_deleted boolean DEFAULT false,
  deleted_at timestamp with time zone,
  deleted_reason text,
  deleted_by uuid,
  metadata jsonb DEFAULT '{}'::jsonb,
  feature_flags jsonb DEFAULT '{}'::jsonb,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  last_login timestamp with time zone,
  profile_image_url text,
  CONSTRAINT user_profiles_pkey PRIMARY KEY (id),
  CONSTRAINT user_profiles_id_fkey FOREIGN KEY (id) REFERENCES auth.users(id),
  CONSTRAINT user_profiles_deleted_by_fkey FOREIGN KEY (deleted_by) REFERENCES public.user_profiles(id)
);



/* PACKAGE.JSON FILE */
{
  "name": "horizon-ridge-credit-union",
  "version": "0.0.0",
  "scripts": {
    "dev:ngrok": "concurrently \"npm run ngrok\" \"npm run dev\"",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint .",
    "ngrok": "ngrok http 3001",
    "dev": "vite",
    "get-ngrok-url": "bash scripts/get-ngrok-url.sh"
  },
  "devDependencies": {
    "baseline-browser-mapping": "^2.9.12",
    "vite-plugin-compression": "^0.5.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "@types/react-dom": "^19.2.3",
    "autoprefixer": "^10.4.23",
    "eslint-plugin-react-refresh": "^0.4.24",
    "@vitejs/plugin-react": "^5.1.2",
    "vite": "^7.2.4",
    "@vitejs/plugin-react-swc": "^4.2.2",
    "postcss": "^8.5.6",
    "@types/react": "^19.2.5",
    "globals": "^16.5.0",
    "eslint": "^9.39.1",
    "@eslint/js": "^9.39.1",
    "tailwindcss": "^3.4.19",
    "terser": "^5.44.1",
    "concurrently": "^8.2.2"
  },
  "type": "module",
  "dependencies": {
    "date-fns": "^4.1.0",
    "resend": "^6.6.0",
    "@supabase/supabase-js": "^2.89.0",
    "dotenv": "^17.2.3",
    "express": "^5.2.1",
    "swiper": "^12.0.3",
    "framer-motion": "^12.24.8",
    "react-icons": "^5.5.0",
    "cors": "^2.8.5",
    "react": "^19.1.1",
    "chart.js": "^4.5.1",
    "react-dom": "^19.1.1",
    "lucide-react": "^0.562.0",
    "@fontsource/montserrat": "^5.2.8",
    "react-router-dom": "^7.11.0"
  },
  "private": true
}


â³
ðŸ¦
âœ“
onClick={() => navigate("/dashboard")}
&lt; 
â‚¬
â‚º
â‚¹
 â€¢
âœï¸