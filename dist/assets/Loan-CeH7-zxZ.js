import{u as G,r as c,j as e,a as z,s as _}from"./index-C7IEQRLs.js";import{i as J}from"./adminAuth-L83m0e2d.js";import{H as K,S as Y}from"./SideBar-BD2DWRfl.js";const Z=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ee=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),se=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})}),T=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),U=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),te=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),ae=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 2m6-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),re=({label:n,name:r,value:l,onChange:p,options:g,disabled:d=!1,error:o,required:m=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:[n,m&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsxs("select",{name:r,value:l,onChange:p,disabled:d,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans text-sm ${o?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${d?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`,children:[e.jsxs("option",{value:"",children:["Select ",n.toLowerCase()]}),g.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]}),o&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:o})]}),ne=({label:n,name:r,value:l,onChange:p,placeholder:g,disabled:d=!1,error:o,rows:m=3})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:n}),e.jsx("textarea",{name:r,value:l,onChange:p,placeholder:g,disabled:d,rows:m,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans text-sm resize-none ${o?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${d?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`}),o&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:o})]}),H=({title:n,icon:r,isOpen:l,onToggle:p,children:g})=>e.jsxs("div",{className:"border border-secondary rounded-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:p,className:"w-full px-6 py-4 bg-secondary bg-opacity-5 hover:bg-opacity-10 flex items-center justify-between transition-all",children:[e.jsxs("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{children:r}),n]}),e.jsx(te,{className:`w-5 h-5 transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsx("div",{className:"px-6 py-4 bg-primary border-t border-secondary",children:g})]}),Q=({mode:n,loan:r,accounts:l,onClose:p,onSubmit:g,submitting:d})=>{const[o,m]=c.useState({account_id:"",action_reason:""}),[u,w]=c.useState({}),[S,L]=c.useState({details:!0,action:!0}),C=t=>{const{name:b,value:k}=t.target;m(A=>({...A,[b]:k})),u[b]&&w(A=>({...A,[b]:""}))},D=t=>{L(b=>({...b,[t]:!b[t]}))},F=()=>{const t={};return n==="approve"&&!o.account_id&&(t.account_id="Account is required for approval"),o.action_reason||(t.action_reason="Reason is required"),t},I=t=>{t.preventDefault();const b=F();if(Object.keys(b).length>0){w(b);return}g({...o,loan_id:r.id,mode:n})};l.find(t=>t.user_id===r.user_id);const h=l.find(t=>t.id===o.account_id);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-lg max-w-2xl w-full max-h-[95vh] overflow-y-auto p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary",children:n==="approve"?"âœ… Approve Loan":"âŒ Decline Loan"}),e.jsx("button",{onClick:p,disabled:d,className:"text-secondary opacity-60 hover:opacity-100 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsx(H,{title:"Loan Details",icon:"ðŸ“‹",isOpen:S.details,onToggle:()=>D("details"),children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-secondary bg-opacity-5 p-3 rounded-sm",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1",children:"Loan ID"}),e.jsxs("p",{className:"font-semibold text-basic font-mono",children:[r.id.slice(0,8),"..."]})]}),e.jsxs("div",{className:"bg-secondary bg-opacity-5 p-3 rounded-sm",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1",children:"Amount"}),e.jsxs("p",{className:"font-bold text-basic text-lg",children:["$",r.amount.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-secondary bg-opacity-5 p-3 rounded-sm",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1",children:"Interest Rate"}),e.jsxs("p",{className:"font-semibold text-secondary",children:[r.interest_rate,"%"]})]}),e.jsxs("div",{className:"bg-secondary bg-opacity-5 p-3 rounded-sm",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1",children:"Term (Months)"}),e.jsx("p",{className:"font-semibold text-secondary",children:r.term_months})]})]}),e.jsxs("div",{className:"bg-secondary bg-opacity-5 p-3 rounded-sm",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1",children:"Purpose"}),e.jsx("p",{className:"font-semibold text-secondary",children:r.purpose})]}),e.jsxs("div",{className:"bg-secondary bg-opacity-5 p-3 rounded-sm",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1",children:"Status"}),e.jsx("p",{className:`font-semibold capitalize ${r.status==="pending"?"text-yellow-600":"text-gray-600"}`,children:r.status})]})]})}),e.jsx(H,{title:n==="approve"?"Approval Details":"Decline Reason",icon:n==="approve"?"âœ…":"âŒ",isOpen:S.action,onToggle:()=>D("action"),children:e.jsxs("div",{className:"space-y-4",children:[n==="approve"&&e.jsxs(e.Fragment,{children:[e.jsx(re,{label:"Credit Account",name:"account_id",value:o.account_id,onChange:C,options:l.filter(t=>t.user_id===r.user_id&&t.is_deleted===!1).map(t=>({value:t.id,label:`${t.account_number} (${t.currency} ${t.balance})`})),required:!0,error:u.account_id}),h&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-sm p-4",children:[e.jsx("p",{className:"text-xs text-green-800 font-semibold mb-2",children:"ðŸ’° Account to be credited:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 opacity-70",children:"Account Number"}),e.jsx("p",{className:"font-mono font-semibold text-green-900",children:h.account_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 opacity-70",children:"Current Balance"}),e.jsxs("p",{className:"font-semibold text-green-900",children:[h.currency," ",h.balance.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 opacity-70",children:"New Balance (After)"}),e.jsxs("p",{className:"font-bold text-green-900",children:[h.currency," ",(h.balance+r.amount).toFixed(2)]})]})]})]})]}),e.jsx(ne,{label:n==="approve"?"Approval Notes (Optional)":"Decline Reason (Required)",name:"action_reason",value:o.action_reason,onChange:C,placeholder:n==="approve"?"Add notes about the approval...":"Explain why the loan is being declined...",rows:3,error:u.action_reason})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-secondary",children:[e.jsx("button",{type:"button",onClick:p,disabled:d,className:"flex-1 py-3 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-secondary hover:bg-opacity-5 transition-all disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:`flex-1 py-3 px-4 font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all flex items-center justify-center gap-2 text-primary ${n==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx(z,{size:"sm"})," Processing..."]}):n==="approve"?e.jsxs(e.Fragment,{children:[e.jsx(T,{})," Approve Loan"]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{})," Decline Loan"]})})]})]})]})})},de=()=>{const n=G(),[r,l]=c.useState(!1),[p,g]=c.useState(!1),[d,o]=c.useState(""),[m,u]=c.useState([]),[w,S]=c.useState([]),[L,C]=c.useState([]),[D,F]=c.useState(!0),[I,h]=c.useState(!1),[t,b]=c.useState(""),[k,A]=c.useState("pending"),[O,$]=c.useState(null),[B,E]=c.useState(null),[q,v]=c.useState({type:"",text:""});c.useEffect(()=>{if(!J()){n("/user/admin/auth/login",{replace:!0});return}l(!0);const a=sessionStorage.getItem("admin_email")||"admin@example.com";o(a)},[n]),c.useEffect(()=>{if(!r)return;(async()=>{try{F(!0);const{data:a,error:i}=await _.from("transactions").select("*").eq("transaction_type","loan_disbursement").order("created_at",{ascending:!1});if(i)throw i;const{data:f,error:y}=await _.from("accounts").select("*").eq("is_deleted",!1).order("created_at",{ascending:!1});if(y)throw y;const{data:M,error:N}=await _.from("user_profiles").select("*").eq("is_deleted",!1);if(N)throw N;const j=a.map(x=>({id:x.id,user_id:x.initiated_by_user_id,amount:x.amount,currency:x.currency,purpose:x.description||"Loan",interest_rate:5.5,term_months:12,status:x.status,created_at:x.created_at,approved_at:x.approved_at,completed_at:x.completed_at,failure_reason:x.failure_reason,reference_number:x.reference_number,metadata:x.metadata||{}}));u(j),S(f||[]),C(M||[])}catch(a){console.error("[ADMIN_LOANS] Fetch error:",a.message),v({type:"error",text:`Failed to load loans: ${a.message}`})}finally{F(!1)}})()},[r]);const V=async s=>{h(!0);try{const a=O,i=w.find(N=>N.id===s.account_id);if(!i)throw new Error("Selected account not found");const f=parseFloat(i.balance)+parseFloat(a.amount),{error:y}=await _.from("transactions").update({status:"completed",approved_at:new Date().toISOString(),completed_at:new Date().toISOString(),updated_at:new Date().toISOString(),metadata:{...a.metadata,approval_notes:s.action_reason,approved_by_admin:d}}).eq("id",a.id);if(y)throw y;const{error:M}=await _.from("accounts").update({balance:f,available_balance:f,updated_at:new Date().toISOString()}).eq("id",s.account_id);if(M)throw M;u(N=>N.map(j=>j.id===a.id?{...j,status:"completed",approved_at:new Date().toISOString(),completed_at:new Date().toISOString()}:j)),S(N=>N.map(j=>j.id===s.account_id?{...j,balance:f,available_balance:f}:j)),v({type:"success",text:`âœ… Loan approved! Account ${i.account_number} credited with $${a.amount.toFixed(2)}`}),$(null),setTimeout(()=>v({type:"",text:""}),4e3)}catch(a){console.error("[ADMIN_LOANS] Approve error:",a.message),v({type:"error",text:`Failed to approve loan: ${a.message}`})}finally{h(!1)}},X=async s=>{h(!0);try{const a=B,{error:i}=await _.from("transactions").update({status:"failed",failure_reason:s.action_reason,updated_at:new Date().toISOString(),metadata:{...a.metadata,declined_by_admin:d}}).eq("id",a.id);if(i)throw i;u(f=>f.map(y=>y.id===a.id?{...y,status:"failed",failure_reason:s.action_reason}:y)),v({type:"success",text:"âœ… Loan declined successfully"}),E(null),setTimeout(()=>v({type:"",text:""}),3e3)}catch(a){console.error("[ADMIN_LOANS] Decline error:",a.message),v({type:"error",text:`Failed to decline loan: ${a.message}`})}finally{h(!1)}},R=m.filter(s=>{const a=L.find(y=>y.id===s.user_id),i=s.reference_number?.toLowerCase().includes(t.toLowerCase())||a?.full_name?.toLowerCase().includes(t.toLowerCase())||a?.email?.toLowerCase().includes(t.toLowerCase())||s.purpose?.toLowerCase().includes(t.toLowerCase())||s.amount?.toString().includes(t),f=k==="all"||s.status===k;return i&&f}),W=s=>L.find(i=>i.id===s)?.full_name||"Unknown User",P=s=>L.find(i=>i.id===s)?.email||"â€”";return r?e.jsxs("div",{className:"min-h-screen bg-primary",children:[e.jsx(K,{adminEmail:d,onMenuToggle:()=>g(!p)}),e.jsxs("div",{className:"flex",children:[e.jsx(Y,{isOpen:p,onClose:()=>g(!1)}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary mb-2",children:"ðŸ’° Loan Management"}),e.jsx("p",{className:"text-sm text-secondary opacity-70",children:"Review, approve, and decline pending loan requests"})]}),q.text&&e.jsx("div",{className:`mb-6 p-4 rounded-sm border-l-4 ${q.type==="success"?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:e.jsx("p",{className:"text-sm font-semibold",children:q.text})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-stretch sm:items-center justify-between",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary opacity-60",children:e.jsx(Z,{})}),e.jsx("input",{type:"text",placeholder:"Search by name, email, reference, or amount...",value:t,onChange:s=>b(s.target.value),className:"w-full pl-12 pr-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm"})]}),e.jsxs("select",{value:k,onChange:s=>A(s.target.value),className:"px-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm bg-primary",children:[e.jsx("option",{value:"all",children:"All Loans"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Approved"}),e.jsx("option",{value:"failed",children:"Declined"})]})]}),D?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(z,{size:"lg"})}):R.length===0?e.jsx("div",{className:"bg-primary border border-secondary rounded-sm p-12 text-center",children:e.jsx("p",{className:"text-secondary opacity-70",children:"No loans found"})}):e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm shadow-md overflow-hidden",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-secondary bg-opacity-5 border-b border-secondary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Borrower"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Rate"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-secondary uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-secondary",children:R.map(s=>e.jsxs("tr",{className:"hover:bg-secondary hover:bg-opacity-5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-mono text-sm text-basic font-semibold",children:[s.reference_number.slice(0,12),"..."]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-secondary",children:W(s.user_id)}),e.jsx("p",{className:"text-xs text-secondary opacity-60",children:P(s.user_id)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-bold text-basic",children:[s.currency," ",s.amount.toFixed(2)]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:[s.term_months," months"]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:[s.interest_rate,"%"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[s.status==="completed"&&e.jsx(ee,{}),s.status==="failed"&&e.jsx(se,{}),s.status==="pending"&&e.jsx(ae,{}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-2",children:s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>$(s),className:"p-2 hover:bg-green-100 rounded-sm transition-all text-green-600",title:"Approve loan",children:e.jsx(T,{})}),e.jsx("button",{onClick:()=>E(s),className:"p-2 hover:bg-red-100 rounded-sm transition-all text-red-600",title:"Decline loan",children:e.jsx(U,{})})]})})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-secondary",children:R.map(s=>e.jsxs("div",{className:"p-4 hover:bg-secondary hover:bg-opacity-5 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-basic text-sm",children:W(s.user_id)}),e.jsx("p",{className:"text-xs text-secondary opacity-60",children:P(s.user_id)})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Amount"}),e.jsxs("p",{className:"font-bold text-basic",children:[s.currency," ",s.amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Term"}),e.jsxs("p",{className:"font-semibold text-secondary",children:[s.term_months,"mo"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Rate"}),e.jsxs("p",{className:"font-semibold text-secondary",children:[s.interest_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Created"}),e.jsx("p",{className:"font-semibold text-secondary",children:new Date(s.created_at).toLocaleDateString()})]})]}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-secondary",children:[e.jsxs("button",{onClick:()=>$(s),className:"flex-1 py-2 px-3 text-xs font-semibold bg-green-100 text-green-600 rounded-sm hover:bg-green-200 transition-all flex items-center justify-center gap-1",children:[e.jsx(T,{})," Approve"]}),e.jsxs("button",{onClick:()=>E(s),className:"flex-1 py-2 px-3 text-xs font-semibold bg-red-100 text-red-600 rounded-sm hover:bg-red-200 transition-all flex items-center justify-center gap-1",children:[e.jsx(U,{})," Decline"]})]})]},s.id))})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary opacity-60 mb-1",children:"Total Loans"}),e.jsx("p",{className:"text-2xl font-bold text-basic",children:m.length})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary opacity-60 mb-1",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.filter(s=>s.status==="pending").length})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary opacity-60 mb-1",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>s.status==="completed").length})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary opacity-60 mb-1",children:"Declined"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.filter(s=>s.status==="failed").length})]})]})]})})]}),O&&e.jsx(Q,{mode:"approve",loan:O,accounts:w,onClose:()=>$(null),onSubmit:V,submitting:I}),B&&e.jsx(Q,{mode:"decline",loan:B,accounts:w,onClose:()=>E(null),onSubmit:X,submitting:I})]}):e.jsx("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:e.jsx(z,{size:"lg"})})};export{de as default};
