import{u as fe,r as o,s as g,j as e,a as _}from"./index-nw5vX4eR.js";import{s as ye}from"./api-CBahbCmN.js";import{U as he}from"./UserHeader-LSGpS8F-.js";import{h as ge}from"./authService-BzjFe2h-.js";const je=({type:c})=>{const n={local:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"})}),international:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8m0 8l-4-2m4 2l4-2"})}),wire:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})};return e.jsx("div",{className:"text-basic",children:n[c]||null})},Ne=({type:c,title:n,description:u,isSelected:i,onClick:x})=>e.jsxs("button",{onClick:x,className:`flex flex-col items-start gap-3 p-4 sm:p-6 rounded-sm border transition-all active:scale-95 w-full text-left ${i?"border-basic bg-primary shadow-lg":"border-secondary bg-primary hover:border-basic hover:shadow-md"}`,"aria-pressed":i,children:[e.jsx("div",{className:"text-basic",children:e.jsx(je,{type:c})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-secondary text-base",children:n}),e.jsx("p",{className:"text-xs text-secondary opacity-70 mt-1",children:u})]}),i&&e.jsx("div",{className:"ml-auto text-basic font-bold",children:"✔️"})]}),T=({label:c,name:n,type:u="text",value:i,onChange:x,placeholder:l,required:b=!1,error:f,disabled:y=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:[c,b&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsx("input",{type:u,name:n,value:i,onChange:x,placeholder:l,disabled:y,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans ${f?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${y?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`}),f&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:f})]}),ve=({label:c,name:n,value:u,onChange:i,options:x,required:l=!1,error:b,disabled:f=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:[c,l&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsxs("select",{name:n,value:u,onChange:i,disabled:f,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans ${b?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${f?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`,children:[e.jsxs("option",{value:"",children:["Select ",c.toLowerCase()]}),x.map(y=>e.jsx("option",{value:y.id||y.value,children:y.label},y.id||y.value))]}),b&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:b})]}),we=({isOpen:c,codeType:n,onVerify:u,onClose:i,isLoading:x,error:l})=>{const[b,f]=o.useState(""),y=S=>{S.preventDefault(),u(n,b),f("")};if(!c)return null;const m={cot:{label:"COT Code",desc:"Certificate of Transfer"},imf:{label:"IMF Code",desc:"International Monetary Fund"},vat:{label:"VAT Code",desc:"Value Added Tax"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-lg max-w-md w-full p-6 sm:p-8",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-secondary mb-2",children:m[n]?.label}),e.jsx("p",{className:"text-sm text-secondary opacity-70 mb-6",children:m[n]?.desc}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:"Enter Code"}),e.jsx("input",{type:"text",value:b,onChange:S=>{f(S.target.value)},placeholder:"Enter code",disabled:x,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-mono text-center text-lg tracking-widest ${l?"border-red-500 focus:ring-red-500":"border-secondary focus:ring-basic focus:ring-opacity-30"}`,autoFocus:!0}),l&&e.jsx("p",{className:"text-xs text-red-600 mt-2",children:l})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:i,disabled:x,className:"flex-1 py-2 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-gray-50 transition-all active:scale-95 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x||!b.trim(),className:"flex-1 py-2 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx(_,{size:"sm"})," Verifying..."]}):"Verify"})]})]})]})})},Ce=({isOpen:c,transaction:n,account:u,profile:i,onClose:x})=>{if(!c||!n)return null;const l=(b,f)=>`${f} ${parseFloat(b).toFixed(2)}`;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-2xl max-w-md w-full max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"bg-basic text-primary p-6 text-center",children:[e.jsx("div",{className:"text-5xl mb-3"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Horizon Ridge Credit Union"}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Transaction Receipt"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"text-center py-3 bg-green-50 border border-green-200 rounded-sm",children:e.jsx("p",{className:"text-sm font-semibold text-green-800",children:"✔️ Completed"})}),e.jsxs("div",{className:"space-y-3 text-sm border-b border-secondary pb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Reference:"}),e.jsx("span",{className:"font-mono font-semibold text-secondary",children:n.reference_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Date:"}),e.jsx("span",{className:"font-semibold text-secondary",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Time:"}),e.jsx("span",{className:"font-semibold text-secondary",children:new Date().toLocaleTimeString()})]})]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 mb-1",children:"Amount"}),e.jsx("p",{className:"text-3xl font-bold text-basic",children:l(n.amount,n.currency)})]}),e.jsxs("div",{className:"space-y-3 text-sm border-y border-secondary py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-70 text-xs uppercase tracking-wider mb-1",children:"From"}),e.jsx("p",{className:"font-semibold text-secondary",children:u?.account_number}),e.jsx("p",{className:"text-xs text-secondary opacity-70",children:i?.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-70 text-xs uppercase tracking-wider mb-1",children:"To"}),e.jsx("p",{className:"font-semibold text-secondary",children:n.external_recipient_iban}),n.external_recipient_name&&e.jsx("p",{className:"text-xs text-secondary opacity-70",children:n.external_recipient_name})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-secondary opacity-70 text-xs uppercase tracking-wider mb-1",children:"Transfer Type"}),e.jsx("p",{className:"font-semibold text-secondary capitalize",children:n.transaction_type==="local"?"Local Transfer":n.transaction_type==="international"?"International Transfer":"Wire Transfer"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 border-t border-secondary text-center",children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 mb-4",children:"Thank you for using Horizon Ridge Credit Union"}),e.jsx("button",{onClick:x,className:"w-full py-2 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95",children:"Close"})]})]})})},Te=(c,n,u,i)=>`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Montserrat', 'Segoe UI', sans-serif; background: linear-gradient(135deg, #1b9466b9 0%, #1b1b1b 100%); margin: 0; padding: 20px; }
    .container { max-width: 600px; margin: 0 auto; background: #fff; border-radius: 3px; box-shadow: 0 4px 12px rgba(27, 148, 102, 0.15); overflow: hidden; }
    .header { background: linear-gradient(135deg, #1b9466b9 0%, #1b1b1b 100%); color: #fff; padding: 40px 20px; text-align: center; }
    .header h1 { margin: 0; font-size: 28px; font-weight: bold; font-family: 'Montserrat', sans-serif; }
    .content { padding: 40px 20px; color: #1b1b1b; }
    .otp-box { background: #f5f5f5; border-left: 4px solid #1b9466b9; border-radius: 3px; padding: 20px; margin: 20px 0; text-align: center; }
    .otp-code { font-size: 48px; font-weight: bold; color: #1b9466b9; letter-spacing: 8px; font-family: 'Courier New', monospace; }
    .otp-label { color: #666; font-size: 14px; margin-top: 10px; }
    .details { background: #f5f5f5; border-radius: 3px; padding: 20px; margin: 20px 0; }
    .detail-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #ddd; }
    .detail-row:last-child { border-bottom: none; }
    .detail-label { color: #666; font-weight: 500; font-size: 14px; }
    .detail-value { color: #1b1b1b; font-weight: bold; text-align: right; }
    .warning { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; border-radius: 3px; margin: 20px 0; color: #856404; font-size: 14px; }
    .footer { background: #f5f5f5; padding: 20px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #ddd; }
    p { margin: 0 0 15px 0; font-size: 14px; line-height: 1.6; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ðŸ” Transfer Verification</h1>
      <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 14px;">One-Time Password (OTP)</p>
    </div>
    <div class="content">
      <p>Hello <strong>${n}</strong>,</p>
      <p>We received a request to transfer funds from your Horizon Ridge Credit Union account. Please use the verification code below to complete your transaction:</p>
      
      <div class="otp-box">
        <div class="otp-code">${c}</div>
        <div class="otp-label">Valid for 5 minutes</div>
      </div>

      <div class="details">
        <div class="detail-row">
          <span class="detail-label">Transfer Type:</span>
          <span class="detail-value">${i==="local"?"Local Transfer":i==="international"?"International Transfer":"Wire Transfer"}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Amount:</span>
          <span class="detail-value">${u}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Timestamp:</span>
          <span class="detail-value">${new Date().toLocaleString()}</span>
        </div>
      </div>

      <div class="warning">
        <strong>âš ï¸ Important:</strong> Never share this code with anyone. Horizon Ridge Credit Union staff will never ask for your OTP.
      </div>

      <p>If you did not request this transfer, please ignore this email and contact our support team immediately.</p>
    </div>
    <div class="footer">
      <p>&copy; 2026 Horizon Ridge Credit Union Bank. All rights reserved.</p>
      <p>This is an automated message. Please do not reply to this email.</p>
    </div>
  </div>
</body>
</html>
`;function Ie(){const c=fe(),[n,u]=o.useState(null),[i,x]=o.useState(null),[l,b]=o.useState([]),[f,y]=o.useState(!0),[m,S]=o.useState("local"),[G,B]=o.useState(!1),[t,P]=o.useState({fromAccountId:"",toAccountNumber:"",beneficiaryName:"",bankName:"",recipientName:"",recipientEmail:"",amount:"",description:"",bankCode:"",country:"NL"}),[M,A]=o.useState(!1),[R,F]=o.useState(""),[J,K]=o.useState(null),[Z,ee]=o.useState(null),[se,V]=o.useState(null),[D,q]=o.useState(null),[te,U]=o.useState(null),[ae,H]=o.useState(0),[ne,I]=o.useState(!1),[re,W]=o.useState(null),[oe,E]=o.useState(""),[ke,Y]=o.useState({cot:!1,imf:!1,vat:!1}),[ie,Q]=o.useState(!1),[ce,z]=o.useState(!1),[j,C]=o.useState({}),[$,N]=o.useState({type:"",text:""}),[k,O]=o.useState(!1);o.useEffect(()=>{let s=!0;return(async()=>{try{const{data:{session:a}={}}=await g.auth.getSession(),r=a?.user?.id;if(!r){c("/auth/login",{replace:!0});return}u(r);const{data:p}=await g.from("user_profiles").select("*").eq("id",r).eq("is_deleted",!1).maybeSingle(),{data:d}=await g.from("accounts").select("*").eq("user_id",r).eq("is_deleted",!1).order("created_at",{ascending:!1});s&&(x(p),b(d||[]),d?.length>0&&P(w=>({...w,fromAccountId:d[0].id})))}catch(a){console.error("[TRANSFER] Load error:",a),N({type:"error",text:"Failed to load account data"})}finally{s&&y(!1)}})(),()=>{s=!1}},[c]);const v=s=>{const{name:a,value:r}=s.target;P(p=>({...p,[a]:r})),j[a]&&C(p=>({...p,[a]:""}))},le=()=>{const s={};t.fromAccountId||(s.fromAccountId="Select source account"),t.toAccountNumber||(s.toAccountNumber="Enter recipient account"),t.beneficiaryName||(s.beneficiaryName="Enter beneficiary name"),t.bankName||(s.bankName="Enter bank name"),m!=="local"&&!t.recipientName&&(s.recipientName="Enter recipient name"),m==="international"&&!t.bankCode&&(s.bankCode="Enter SWIFT/BIC code"),(!t.amount||parseFloat(t.amount)<=0)&&(s.amount="Enter valid amount");const a=l.find(r=>r.id===t.fromAccountId);return a&&parseFloat(t.amount)>parseFloat(a.balance||0)&&(s.amount="Insufficient balance"),C(s),Object.keys(s).length===0},de=async s=>{if(s.preventDefault(),!!le()){O(!0),N({type:"",text:""});try{const{data:a,error:r}=await g.from("codes").select("*").eq("code_type","transfer_otp").eq("is_used",!1).gt("expires_at",new Date().toISOString()).limit(1).single();if(r||!a)throw new Error("No available OTP codes. Please try again later.");const p=l.find(L=>L.id===t.fromAccountId);if(!p)throw new Error("Selected account not found");if(!i?.email)throw new Error("User email not found. Please update your profile.");const d=Te(a.code,t.recipientName||i?.full_name||"User",`${p.currency} ${parseFloat(t.amount).toFixed(2)}`,m);if(!d||d.length===0)throw new Error("Failed to generate email content. generateOTPEmailHTML() returned empty.");const w=await ye({to:i.email,subject:"Your Horizon Ridge Credit Union Transfer Verification Code",html:d});ee(a),K(a.id),A(!0),N({type:"success",text:`OTP sent to ${i.email}. Check your inbox (valid for 5 minutes).`})}catch(a){console.error("[TRANSFER] OTP request failed:",{message:a.message,status:a.status});let r="Failed to send OTP. ";a.message.includes("Network error")?r+="Backend server is not running. Start with: npm start in backend folder.":a.message.includes("Cannot connect")?r+="Cannot reach email server. Check backend is running on port 3001.":a.message.includes("No available OTP")?r+="Temporary service issue. Try again in a moment.":a.message.includes("authentication")?r+="Email service authentication failed. Check backend credentials.":r+=a.message||"Please try again.",N({type:"error",text:r})}finally{O(!1)}}},me=async s=>{if(s.preventDefault(),!R.trim()){C({otpCode:"Enter OTP code"});return}if(R!==Z?.code){C({otpCode:"Invalid OTP code"});return}O(!0),N({type:"",text:""});try{const a=l.find(L=>L.id===t.fromAccountId),r=parseFloat(t.amount);await g.from("codes").update({is_used:!0,used_at:new Date().toISOString(),used_by_user_id:n}).eq("id",J);const{data:p,error:d}=await g.from("transactions").insert([{from_account_id:t.fromAccountId,external_recipient_name:t.recipientName||t.beneficiaryName,external_recipient_iban:t.toAccountNumber,amount:r,currency:a?.currency||"EUR",transaction_type:m,description:t.description||null,status:"pending",reference_number:`TXN-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,initiated_by_user_id:n,metadata:{transfer_type:m,bank_code:t.bankCode||null,bank_name:t.bankName||null,beneficiary_name:t.beneficiaryName||null,country:t.country||"NL",otp_verified_at:new Date().toISOString()}}]).select("*").single();if(d)throw d;const w=parseFloat(a.balance||0)-r;H(w),await g.from("accounts").update({balance:w}).eq("id",t.fromAccountId),V(p.id),U(p),q(p.status),A(!1),F(""),N({type:"success",text:`Transfer initiated! Reference: ${p.reference_number}`})}catch(a){console.error("[TRANSFER] OTP verification error:",a),N({type:"error",text:a.message||"Verification failed"})}finally{O(!1)}},pe=async(s,a)=>{Q(!0),E("");try{const{data:r,error:p}=await g.from("codes").select("*").eq("code_type",s).eq("code",a).eq("is_used",!1).gt("expires_at",new Date().toISOString()).single();if(p||!r){E("Invalid or expired code");return}if(await g.from("codes").update({is_used:!0,used_at:new Date().toISOString(),used_by_user_id:n}).eq("id",r.id),Y(d=>({...d,[s]:!0})),I(!1),s==="vat")await g.from("transactions").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",se),q("completed"),z(!0),N({type:"success",text:"Transfer completed successfully!"});else{const d=["cot","imf","vat"],w=d.indexOf(s)+1;w<d.length&&(W(d[w]),I(!0))}}catch(r){console.error("[TRANSFER] Code verification error:",r),E(r.message||"Verification failed")}finally{Q(!1)}},xe=async()=>{W("cot"),I(!0)},ue=()=>{P({fromAccountId:l[0]?.id||"",toAccountNumber:"",beneficiaryName:"",bankName:"",recipientName:"",recipientEmail:"",amount:"",description:"",bankCode:"",country:"NL"}),C({}),N({type:"",text:""}),B(!1),A(!1),F(""),V(null),q(null),U(null),H(0),Y({cot:!1,imf:!1,vat:!1}),z(!1)};if(f)return e.jsx("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:e.jsx(_,{size:"lg"})});if(!n)return null;const X=[{type:"local",title:"Local Transfer",description:"Transfer within Netherlands"},{type:"international",title:"International",description:"Send money abroad"},{type:"wire",title:"Wire Transfer",description:"Fast SWIFT transfer"}],be=l.map(s=>({id:s.id,label:`${s.account_number} (${s.account_type}) - ${s.currency} ${parseFloat(s.balance||0).toFixed(2)}`})),h=l.find(s=>s.id===t.fromAccountId);return e.jsxs("div",{className:"min-h-screen bg-primary",children:[e.jsx(he,{profile:i,handleSignOut:()=>ge(c)}),e.jsxs("main",{className:"container mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-2 text-xs sm:text-sm text-secondary opacity-70",children:[e.jsx("button",{onClick:()=>c("/dashboard"),className:"hover:opacity-100 font-bold",children:"< Dashboard"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-semibold opacity-100",children:"Transfer Money"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-secondary mb-2",children:"Send Money"}),e.jsx("p",{className:"text-sm sm:text-base text-secondary opacity-70",children:"Choose your transfer type and complete the transaction"})]}),$.text&&e.jsx("div",{className:`mb-6 p-4 sm:p-6 rounded-sm border-l-4 ${$.type==="success"?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:e.jsx("p",{className:"text-sm font-semibold",children:$.text})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-md p-6 sticky top-24",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-secondary mb-4",children:"Transfer Type"}),e.jsx("div",{className:"space-y-3",children:X.map(s=>e.jsx(Ne,{type:s.title,title:s.title,description:s.description,isSelected:m===s.type,onClick:()=>{S(s.type),B(!0),C({})}},s.type))})]})}),G&&e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-md p-6 sm:p-8",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-secondary mb-6",children:[X.find(s=>s.type===m)?.title," ","Details"]}),!M&&D!=="pending"?e.jsxs("form",{onSubmit:de,children:[e.jsx(ve,{label:"From Account",name:"fromAccountId",value:t.fromAccountId,onChange:v,options:be,required:!0,error:j.fromAccountId}),e.jsx(T,{label:"Beneficiary Name",name:"beneficiaryName",value:t.beneficiaryName,onChange:v,placeholder:"Full name of beneficiary",required:!0,error:j.beneficiaryName}),e.jsx(T,{label:"Bank Name",name:"bankName",value:t.bankName,onChange:v,placeholder:"Name of receiving bank",required:!0,error:j.bankName}),(m==="international"||m==="wire")&&e.jsx(T,{label:"Recipient Name",name:"recipientName",value:t.recipientName,onChange:v,placeholder:"Full name",required:!0,error:j.recipientName}),e.jsx(T,{label:"Recipient Account Number",name:"toAccountNumber",value:t.toAccountNumber,onChange:v,placeholder:m==="local"?"Account number":"IBAN",required:!0,error:j.toAccountNumber}),(m==="international"||m==="wire")&&e.jsx(T,{label:"SWIFT/BIC Code",name:"bankCode",value:t.bankCode,onChange:v,placeholder:"e.g., ABNANL2A",required:!0,error:j.bankCode}),e.jsx(T,{label:`Amount (${h?.currency||"EUR"})`,name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v,placeholder:"0.00",required:!0,error:j.amount}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:"Description (Optional)"}),e.jsx("textarea",{name:"description",value:t.description,onChange:v,placeholder:"Enter description",rows:"3",className:"w-full px-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 font-sans bg-primary"})]}),t.amount&&h&&e.jsxs("div",{className:"mb-6 p-4 sm:p-6 rounded-sm border border-secondary bg-primary shadow-sm space-y-4",children:[e.jsx("h4",{className:"font-semibold text-secondary text-base",children:"Summary"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"From Account:"}),e.jsx("span",{className:"font-semibold text-secondary",children:h.account_number})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"Beneficiary:"}),e.jsx("span",{className:"font-semibold text-secondary",children:t.beneficiaryName})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"Bank:"}),e.jsx("span",{className:"font-semibold text-secondary",children:t.bankName})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"To Account:"}),e.jsx("span",{className:"font-semibold text-secondary",children:t.toAccountNumber})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("span",{className:"font-semibold text-secondary",children:"Amount:"}),e.jsxs("span",{className:"font-bold text-basic text-lg",children:[h.currency," ",parseFloat(t.amount).toFixed(2)]})]})]})]}),e.jsx("button",{type:"submit",disabled:k,className:"w-full py-3 px-6 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx(_,{size:"sm"})," Sending OTP..."]}):"Request OTP & Continue"})]}):M&&!D?e.jsxs("form",{onSubmit:me,children:[e.jsx("div",{className:"mb-6 p-4 sm:p-6 rounded-sm border border-secondary bg-primary",children:e.jsxs("p",{className:"text-secondary text-sm",children:["OTP code sent to"," ",e.jsx("strong",{className:"text-basic",children:i?.email}),". Valid for 5 minutes."]})}),e.jsx(T,{label:"Enter OTP Code",name:"otpCode",value:R,onChange:s=>{F(s.target.value),C({})},placeholder:"000000",required:!0,error:j.otpCode}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{A(!1),F("")},className:"flex-1 py-3 px-6 border border-secondary text-secondary font-semibold rounded-sm hover:bg-gray-50 transition-all active:scale-95",children:"Back"}),e.jsx("button",{type:"submit",disabled:k,className:"flex-1 py-3 px-6 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx(_,{size:"sm"})," Verifying..."]}):"Verify & Continue"})]})]}):D==="pending"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 sm:p-6 rounded-sm border-l-4 border-yellow-500 bg-yellow-50",children:[e.jsx("h3",{className:"font-bold text-secondary mb-2 text-base",children:"Transfer Pending"}),e.jsx("p",{className:"text-secondary text-sm opacity-80",children:"Your transfer is pending verification. Click the button below to complete."})]}),e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary p-6 shadow-sm space-y-4",children:[e.jsx("h4",{className:"font-bold text-secondary text-base",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"From Account:"}),e.jsx("span",{className:"font-semibold text-secondary",children:h?.account_number})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"Beneficiary:"}),e.jsx("span",{className:"font-semibold text-secondary",children:t.beneficiaryName})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"Bank:"}),e.jsx("span",{className:"font-semibold text-secondary",children:t.bankName})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"To Account:"}),e.jsx("span",{className:"font-semibold text-secondary",children:t.toAccountNumber})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary pt-2",children:[e.jsx("span",{className:"font-semibold text-secondary",children:"Amount:"}),e.jsxs("span",{className:"font-bold text-basic text-lg",children:["-",h?.currency," ",parseFloat(t.amount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"Previous Balance:"}),e.jsxs("span",{className:"font-semibold text-secondary",children:[h?.currency," ",parseFloat(h?.balance||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between rounded-sm border border-secondary p-3 bg-gray-50",children:[e.jsx("span",{className:"font-semibold text-secondary",children:"Updated Balance:"}),e.jsxs("span",{className:"font-bold text-basic",children:[h?.currency," ",ae.toFixed(2)]})]})]})]}),e.jsx("button",{onClick:xe,disabled:k,className:"w-full py-3 px-6 bg-basic text-primary font-bold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx(_,{size:"sm"})," Completing..."]}):"Complete Transfer"})]}):null]})})]})]}),e.jsx(we,{isOpen:ne,codeType:re,onVerify:pe,onClose:()=>{I(!1),E("")},isLoading:ie,error:oe}),e.jsx(Ce,{isOpen:ce,transaction:te,account:h,profile:i,onClose:()=>{z(!1),setTimeout(()=>{ue(),c("/dashboard")},1500)}})]})}export{Ie as TransferPage,Ie as default};
