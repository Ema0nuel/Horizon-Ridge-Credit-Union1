async function i({to:e,subject:r,html:n}){try{const t=new AbortController,s=setTimeout(()=>t.abort(),5e3),o=await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({to:e,subject:r,html:n}),signal:t.signal});if(clearTimeout(s),!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const a=await o.json();if(!a.success)throw new Error(a.error||"Failed to send email");return a.result}catch(t){throw console.error("Email send error:",t),t.name==="AbortError"?new Error("Request timed out - server might be down"):t.message.includes("Failed to fetch")?new Error("Could not connect to email server - is it running?"):t}}async function c(e){try{const r=await fetch("/api/mark-email-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailId:e})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return(await r.json()).email}catch(r){throw console.error("Mark read error:",r),r}}export{c as m,i as s};
