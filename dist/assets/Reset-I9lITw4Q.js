import{u as R,c as j,r as s,j as e,a as u,s as C}from"./index-DvGZ9O-H.js";import{a as U}from"./useAuth-BJnvmTjV.js";import"./authService-av9k-sGG.js";import"./api-CBahbCmN.js";function z(){const p=R(),{updatePassword:b,loading:a}=U(),{token:m}=j(),[n,h]=s.useState(""),[c,N]=s.useState(""),[d,t]=s.useState(""),[g,x]=s.useState(!1),[f,o]=s.useState(!1),[D,l]=s.useState(!0);s.useEffect(()=>{(async()=>{l(!0);try{if(m){console.log("[RESET] Token from URL params:",m.substring(0,20)+"..."),o(!0),l(!1);return}const{data:i}=await C.auth.getSession();i?.session?(console.log("[RESET] ✓ Valid Supabase session found"),o(!0)):(console.log("[RESET] ❌ No valid session or token"),o(!1))}catch(i){console.error("[RESET] Token validation error:",i),o(!1)}finally{l(!1)}})()},[m]);const v=async r=>{if(r.preventDefault(),t(""),!n||!c){t("Please fill in all fields");return}if(n!==c){t("Passwords do not match");return}if(n.length<8){t("Password must be at least 8 characters");return}try{console.log("[RESET] Attempting password update..."),await b(n),x(!0),console.log("[RESET] ✓ Password reset successful"),setTimeout(()=>p("/auth/login"),2e3)}catch(i){console.error("[RESET] Password update error:",i),t(i.message||"Failed to reset password")}};return D?e.jsxDEV("div",{className:"min-h-screen bg-primary flex items-center justify-center px-4",children:e.jsxDEV("div",{className:"w-full max-w-md bg-primary rounded-sm border border-secondary shadow-lg p-8 text-center",children:[e.jsxDEV(u,{size:"lg"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:92,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-secondary opacity-70 mt-4",children:"Validating reset link..."},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:91,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:90,columnNumber:7},this):f?e.jsxDEV("div",{className:"min-h-screen bg-primary flex items-center justify-center px-4",children:e.jsxDEV("div",{className:"w-full max-w-md bg-primary rounded-sm border border-secondary shadow-lg p-8",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-secondary mb-2",children:"Create New Password"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:138,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-secondary opacity-70",children:"Enter a strong password for your account"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:137,columnNumber:9},this),g?e.jsxDEV("div",{className:"p-6 bg-green-100 border border-green-300 rounded-sm text-center",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"✓"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:148,columnNumber:13},this),e.jsxDEV("h2",{className:"font-semibold text-green-800 mb-2",children:"Success!"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:149,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-green-700",children:"Your password has been reset. Redirecting to login..."},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:150,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:147,columnNumber:11},this):e.jsxDEV("form",{onSubmit:v,className:"space-y-6",noValidate:!0,children:[d&&e.jsxDEV("div",{className:"p-4 bg-red-50 border border-red-300 text-red-800 rounded-sm text-sm flex items-start gap-3",role:"alert",children:[e.jsxDEV("span",{className:"text-lg",children:"⚠"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:161,columnNumber:17},this),e.jsxDEV("span",{children:d},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:162,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:157,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary mb-2",children:["New Password ",e.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:171,columnNumber:30},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:167,columnNumber:15},this),e.jsxDEV("input",{id:"password",type:"password",value:n,onChange:r=>h(r.target.value),placeholder:"Min 8 characters",className:"w-full px-4 py-3 border border-secondary rounded-sm text-secondary bg-primary focus:outline-none focus:ring-2 focus:ring-basic focus:border-transparent transition-all",disabled:a,required:!0,"aria-describedby":"password-hint"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:173,columnNumber:15},this),e.jsxDEV("p",{id:"password-hint",className:"text-xs text-secondary opacity-60 mt-1",children:"Use uppercase, lowercase, numbers, and symbols for strength"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:184,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:166,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-secondary mb-2",children:["Confirm Password ",e.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:197,columnNumber:34},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:193,columnNumber:15},this),e.jsxDEV("input",{id:"confirmPassword",type:"password",value:c,onChange:r=>N(r.target.value),placeholder:"Re-enter password",className:"w-full px-4 py-3 border border-secondary rounded-sm text-secondary bg-primary focus:outline-none focus:ring-2 focus:ring-basic focus:border-transparent transition-all",disabled:a,required:!0},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:199,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:192,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:a,className:"w-full py-3 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all active:scale-95","aria-busy":a,children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(u,{size:"sm"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:219,columnNumber:19},this)," Resetting..."]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:218,columnNumber:17},this):"Reset Password"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:211,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:155,columnNumber:11},this),e.jsxDEV("div",{className:"mt-6 pt-6 border-t border-secondary text-center",children:e.jsxDEV("p",{className:"text-xs text-secondary opacity-60",children:["Remember your password?"," ",e.jsxDEV("a",{href:"/auth/login",className:"text-basic hover:underline font-semibold",children:"Sign in here"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:230,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:229,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:136,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:135,columnNumber:5},this):e.jsxDEV("div",{className:"min-h-screen bg-primary flex items-center justify-center px-4",children:e.jsxDEV("div",{className:"w-full max-w-md bg-primary rounded-sm border border-secondary shadow-lg p-8 text-center",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"⏰"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:106,columnNumber:11},this),e.jsxDEV("h1",{className:"text-3xl font-bold text-secondary mb-4",children:"Invalid or Expired Link"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:107,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-secondary opacity-70 mb-6",children:"This reset link has expired or is invalid. Reset links are valid for 24 hours."},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:110,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("a",{href:"/auth/forgot-password",className:"block w-full py-3 px-6 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all",children:"Request New Reset Link"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:115,columnNumber:13},this),e.jsxDEV("a",{href:"/auth/login",className:"block w-full py-3 px-6 border border-secondary text-secondary font-semibold rounded-sm hover:bg-primary hover:bg-opacity-50 transition-all",children:"Back to Login"},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:121,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:105,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/emas0/OneDrive/Documents/practice/2026/Horizon Ridge Credit Union/src/pages/main/auth/Reset.jsx",lineNumber:104,columnNumber:7},this)}export{z as ResetPasswordPage};
