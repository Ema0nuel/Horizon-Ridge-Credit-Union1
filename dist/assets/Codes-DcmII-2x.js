import{u as re,r,j as e,a as G,s as R}from"./index-C7IEQRLs.js";import{i as ne}from"./adminAuth-L83m0e2d.js";import{H as oe,S as ie}from"./SideBar-BD2DWRfl.js";const le=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),de=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),q=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),ce=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),U=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),xe=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),pe=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),me=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),he=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),k={transfer_otp:{label:"Transfer OTP",digits:5,validityHours:.5,color:"blue",description:"5-digit transfer verification code",icon:"ðŸ“±"},"2fa_otp":{label:"2FA OTP",digits:6,validityHours:.5,color:"purple",description:"6-digit two-factor authentication code",icon:"ðŸ”"},kyc_verification:{label:"KYC Verification",digits:8,validityHours:72,color:"green",description:"8-digit KYC verification code",icon:"âœ…"},cot:{label:"Certificate of Transfer (COT)",digits:4,validityHours:720,color:"orange",description:"4-digit COT code",icon:"ðŸ“„"},imf:{label:"International Monetary Fund (IMF)",digits:4,validityHours:720,color:"indigo",description:"4-digit IMF code",icon:"ðŸŒ"},vat:{label:"Value Added Tax (VAT)",digits:4,validityHours:720,color:"red",description:"4-digit VAT code",icon:"ðŸ’°"}},ue=({isOpen:n,codeType:o,onClose:d,onGenerate:f,isSubmitting:h})=>{const[b,S]=r.useState(10),[i,u]=r.useState(""),c=k[o],j=async l=>{if(l.preventDefault(),u(""),b<1){u("Quantity must be at least 1");return}if(b>1e3){u("Quantity cannot exceed 1000");return}try{await f(o,b),S(10)}catch(E){u(E.message)}};return!n||!c?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:l=>l.target===l.currentTarget&&d(),role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-secondary",children:[c.icon," Generate ",c.label]}),e.jsx("button",{onClick:d,className:"text-secondary opacity-60 hover:opacity-100 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-semibold",children:c.label}),e.jsxs("p",{className:"opacity-80 mt-1",children:[c.digits,"-digit code â€¢ Valid for ",c.validityHours," ","hour",c.validityHours!==1?"s":""]}),e.jsx("p",{className:"opacity-70 text-xs mt-2",children:c.description})]})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:b,onChange:l=>{S(Math.max(1,Math.min(1e3,parseInt(l.target.value)||0))),i&&u("")},disabled:h,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all text-sm ${i?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${h?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`}),i&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:i}),e.jsx("p",{className:"text-xs text-secondary opacity-60 mt-1",children:"Generate up to 1000 codes at once"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:d,disabled:h,className:"flex-1 py-3 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-secondary hover:bg-opacity-5 disabled:opacity-50 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"flex-1 py-3 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(G,{size:"sm"})," Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{})," Generate"]})})]})]})]})})},ye=({message:n})=>{if(!n||!n.text)return null;const o={success:"bg-green-100 border-green-300",error:"bg-red-100 border-red-300",info:"bg-blue-100 border-blue-300"},d={success:"text-green-800",error:"text-red-800",info:"text-blue-800"};return e.jsx("div",{className:`fixed top-4 right-4 border rounded-sm p-4 ${o[n.type]} ${d[n.type]} shadow-lg z-40 max-w-sm`,role:"alert",children:e.jsx("p",{className:"text-sm font-semibold",children:n.text})})},be=({currentPage:n,totalPages:o,onPageChange:d,perPage:f,onPerPageChange:h,totalItems:b,displayedItems:S})=>{const i=(n-1)*f+1,u=Math.min(n*f,b);return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-6 py-4 bg-secondary bg-opacity-5 border-t border-secondary",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"perPage",className:"text-sm text-secondary opacity-70",children:"Show per page:"}),e.jsxs("select",{id:"perPage",value:f,onChange:c=>{h(parseInt(c.target.value)),d(1)},className:"px-3 py-2 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm bg-primary",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"text-sm text-secondary opacity-70",children:["Showing ",e.jsx("span",{className:"font-semibold",children:i})," to"," ",e.jsx("span",{className:"font-semibold",children:u})," of"," ",e.jsx("span",{className:"font-semibold",children:b})," codes"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(n-1),disabled:n===1,className:"p-2 border border-secondary rounded-sm hover:bg-secondary hover:bg-opacity-5 disabled:opacity-30 disabled:cursor-not-allowed transition-all","aria-label":"Previous page",children:e.jsx(xe,{})}),e.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,o)}).map((c,j)=>{const l=o<=5?j+1:Math.max(1,n-2)+j;return l>o?null:e.jsx("button",{onClick:()=>d(l),className:`px-3 py-2 rounded-sm text-sm font-semibold transition-all ${n===l?"bg-basic text-primary":"border border-secondary text-secondary hover:bg-secondary hover:bg-opacity-5"}`,children:l},l)}),o>5&&n<o-2&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-secondary opacity-50",children:"..."}),e.jsx("button",{onClick:()=>d(o),className:"px-3 py-2 rounded-sm text-sm font-semibold border border-secondary text-secondary hover:bg-secondary hover:bg-opacity-5 transition-all",children:o})]})]}),e.jsx("button",{onClick:()=>d(n+1),disabled:n===o,className:"p-2 border border-secondary rounded-sm hover:bg-secondary hover:bg-opacity-5 disabled:opacity-30 disabled:cursor-not-allowed transition-all","aria-label":"Next page",children:e.jsx(pe,{})})]})]})},Ne=()=>{const n=re(),[o,d]=r.useState(!1),[f,h]=r.useState(!1),[b,S]=r.useState(""),[i,u]=r.useState([]),[c,j]=r.useState(!0),[l,E]=r.useState(!1),[_,K]=r.useState(""),[I,P]=r.useState("all"),[L,J]=r.useState("all"),[T,N]=r.useState(1),[A,X]=r.useState(20),[z,F]=r.useState(null),[Z,v]=r.useState({type:"",text:""}),[D,V]=r.useState(null);r.useEffect(()=>{if(!ne()){n("/user/admin/auth/login",{replace:!0});return}d(!0);const t=sessionStorage.getItem("admin_email")||"admin@example.com";S(t)},[n]),r.useEffect(()=>{if(!o)return;(async()=>{try{j(!0);const{data:t,error:a}=await R.from("codes").select("*").order("created_at",{ascending:!1});if(a)throw a;u(t||[]),N(1)}catch(t){console.error("[ADMIN_CODES] Fetch error:",t.message),v({type:"error",text:`Failed to load codes: ${t.message}`})}finally{j(!1)}})()},[o]);const ee=async(s,t)=>{E(!0);try{const a=k[s],C=Math.pow(10,a.digits)-1,x=new Set(i.filter(y=>y.code_type===s).map(y=>y.code)),m=[],H=new Date(Date.now()+a.validityHours*60*60*1e3).toISOString();for(let y=0;y<t;y++){let g,$=0;const Y=100;do{const ae=Math.floor(Math.random()*(C+1));g=String(ae).padStart(a.digits,"0"),$++}while(x.has(g)&&$<Y);$<Y&&(m.push({code_type:s,code:g,expires_at:H,is_used:!1,metadata:{}}),x.add(g))}if(m.length===0)throw new Error("Failed to generate unique codes. Try a smaller quantity.");const{error:p}=await R.from("codes").insert(m);if(p)throw p;u(y=>[...m,...y]),N(1),v({type:"success",text:`âœ… Generated ${m.length} ${a.label} codes`}),F(null),setTimeout(()=>v({type:"",text:""}),4e3)}catch(a){console.error("[ADMIN_CODES] Generation error:",a.message),v({type:"error",text:a.message||"Failed to generate codes"})}finally{E(!1)}},se=s=>{try{const t=["Code Type","Code","Email","Phone","Is Used","Used At","Expires At","Created At"],a=s.map(p=>[p.code_type,p.code,p.email||"",p.phone||"",p.is_used?"Yes":"No",p.used_at||"",p.expires_at||"",p.created_at||""]),C=[t,...a].map(p=>p.map(y=>{const g=String(y);return g.includes(",")||g.includes('"')?`"${g.replace(/"/g,'""')}"`:g}).join(",")).join(`
`),x=new Blob([C],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),H=URL.createObjectURL(x);m.setAttribute("href",H),m.setAttribute("download",`codes-export-${new Date().toISOString().slice(0,10)}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m),v({type:"success",text:`âœ… Exported ${s.length} codes`}),setTimeout(()=>v({type:"",text:""}),3e3)}catch(t){console.error("[ADMIN_CODES] Export error:",t.message),v({type:"error",text:"Failed to export codes"})}},W=(s,t)=>{navigator.clipboard.writeText(t),V(s),setTimeout(()=>V(null),2e3)},w=r.useMemo(()=>i.filter(s=>{const t=s.code.includes(_)||s.email?.toLowerCase().includes(_.toLowerCase())||s.phone?.includes(_),a=I==="all"||s.code_type===I,C=L==="all"||(L==="used"?s.is_used:!s.is_used);return t&&a&&C}),[i,_,I,L]),O=Math.ceil(w.length/A),Q=(T-1)*A,te=Q+A,B=w.slice(Q,te);r.useEffect(()=>{T>O&&O>0&&N(1)},[O,T]);const M=r.useMemo(()=>{const s={};let t=0,a=0;const C=new Date;return i.forEach(x=>{s[x.code_type]||(s[x.code_type]={total:0,used:0,unused:0,expired:0}),s[x.code_type].total++,x.is_used?(s[x.code_type].used++,t++):s[x.code_type].unused++,new Date(x.expires_at)<C&&(s[x.code_type].expired++,a++)}),{codeTypeStats:s,totalCodes:i.length,totalUsed:t,totalUnused:i.length-t,totalExpired:a}},[i]);return o?e.jsxs("div",{className:"min-h-screen bg-primary",children:[e.jsx(oe,{adminEmail:b,onMenuToggle:()=>h(!f)}),e.jsxs("div",{className:"flex",children:[e.jsx(ie,{isOpen:f,onClose:()=>h(!1)}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary mb-2",children:"ðŸ” Codes Management"}),e.jsx("p",{className:"text-sm text-secondary opacity-70",children:"Generate and manage OTP, 2FA, KYC, COT, IMF, and VAT verification codes"})]}),e.jsx(ye,{message:Z}),e.jsxs("div",{className:"mb-8 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1 font-semibold",children:"Total Codes"}),e.jsx("p",{className:"text-3xl font-bold text-basic",children:M.totalCodes})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1 font-semibold",children:"Unused"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:M.totalUnused})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1 font-semibold",children:"Used"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:M.totalUsed})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4",children:[e.jsx("p",{className:"text-xs text-secondary opacity-60 uppercase tracking-wider mb-1 font-semibold",children:"Expired"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:M.totalExpired})]})]}),e.jsxs("div",{className:"mb-8 bg-primary border border-secondary rounded-sm p-6",children:[e.jsxs("h2",{className:"text-sm font-semibold text-secondary uppercase tracking-wider mb-4 flex items-center gap-2 opacity-80",children:[e.jsx(me,{})," Generate New Codes"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:Object.entries(k).map(([s,t])=>e.jsxs("button",{onClick:()=>F(s),className:"py-3 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95 flex flex-col items-center gap-1 text-sm",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"hidden sm:inline truncate",children:t.label.split(" ")[0]})]},s))})]}),e.jsxs("div",{className:"mb-6 bg-primary border border-secondary rounded-sm p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative sm:col-span-1",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary opacity-60",children:e.jsx(le,{})}),e.jsx("input",{type:"text",placeholder:"Search codes, emails, phones...",value:_,onChange:s=>{K(s.target.value),N(1)},className:"w-full pl-12 pr-4 py-2 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm"})]}),e.jsxs("select",{value:I,onChange:s=>{P(s.target.value),N(1)},className:"px-4 py-2 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm bg-primary",children:[e.jsx("option",{value:"all",children:"All Code Types"}),Object.entries(k).map(([s,t])=>e.jsx("option",{value:s,children:t.label},s))]}),e.jsxs("select",{value:L,onChange:s=>{J(s.target.value),N(1)},className:"px-4 py-2 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm bg-primary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"unused",children:"Unused Only"}),e.jsx("option",{value:"used",children:"Used Only"})]})]}),e.jsxs("button",{onClick:()=>se(w),disabled:w.length===0,className:"w-full sm:w-auto px-6 py-2 border border-secondary text-secondary font-semibold rounded-sm hover:bg-secondary hover:bg-opacity-5 disabled:opacity-50 transition-all flex items-center justify-center gap-2 text-sm",children:[e.jsx(ce,{})," Export CSV (",w.length,")"]})]}),c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(G,{size:"lg"})}):w.length===0?e.jsx("div",{className:"bg-primary border border-secondary rounded-sm p-12 text-center",children:e.jsx("p",{className:"text-secondary opacity-70",children:"No codes found"})}):e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm shadow-md overflow-hidden flex flex-col",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-secondary bg-opacity-5 border-b border-secondary sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-secondary uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-secondary",children:B.map(s=>{const t=k[s.code_type],a=new Date(s.expires_at)<new Date;return e.jsxs("tr",{className:"hover:bg-secondary hover:bg-opacity-5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-mono text-sm font-semibold text-basic flex items-center gap-2",children:[t?.icon," ",s.code]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-xs font-semibold text-secondary bg-secondary bg-opacity-10 px-2 py-1 rounded",children:t?.label})}),e.jsx("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:s.email||"â€”"}),e.jsx("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:s.phone||"â€”"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center gap-2",children:s.is_used?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:[e.jsx(U,{})," Used"]}):a?e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:"Expired"}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:[e.jsx(U,{})," Available"]})})}),e.jsx("td",{className:"px-6 py-4 text-xs text-secondary opacity-70",children:new Date(s.expires_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-xs text-secondary opacity-70",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>W(s.id,s.code),className:`p-2 rounded-sm transition-all ${D===s.id?"bg-green-100":"hover:bg-secondary hover:bg-opacity-10"}`,title:"Copy code",children:D===s.id?e.jsx(U,{className:"text-green-600"}):e.jsx(q,{})})})]},s.id)})})]})}),e.jsx("div",{className:"md:hidden divide-y divide-secondary flex-1",children:B.map(s=>{const t=k[s.code_type],a=new Date(s.expires_at)<new Date;return e.jsxs("div",{className:"p-4 hover:bg-secondary hover:bg-opacity-5 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-mono font-bold text-basic text-lg flex items-center gap-1",children:[t?.icon," ",s.code]}),e.jsx("p",{className:"text-xs text-secondary opacity-60 mt-1",children:t?.label})]}),e.jsx("button",{onClick:()=>W(s.id,s.code),className:`p-2 rounded-sm transition-all ${D===s.id?"bg-green-100":"hover:bg-secondary hover:bg-opacity-10"}`,children:D===s.id?e.jsx(U,{className:"text-green-600"}):e.jsx(q,{})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[s.email&&e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Email"}),e.jsx("p",{className:"font-semibold text-secondary truncate",children:s.email})]}),s.phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Phone"}),e.jsx("p",{className:"font-semibold text-secondary",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Expires"}),e.jsx("p",{className:"font-semibold text-secondary",children:new Date(s.expires_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Status"}),s.is_used?e.jsx("p",{className:"font-semibold text-blue-600",children:"Used"}):a?e.jsx("p",{className:"font-semibold text-red-600",children:"Expired"}):e.jsx("p",{className:"font-semibold text-green-600",children:"Available"})]})]})]},s.id)})}),e.jsx(be,{currentPage:T,totalPages:O,onPageChange:N,perPage:A,onPerPageChange:X,totalItems:w.length,displayedItems:B.length})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-secondary mb-4",children:"Code Type Breakdown"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(k).map(([s,t])=>{const a=M.codeTypeStats[s]||{total:0,used:0,unused:0,expired:0};return e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-secondary mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:t.icon}),t.label]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Total"}),e.jsx("span",{className:"font-semibold text-basic",children:a.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Used"}),e.jsx("span",{className:"font-semibold text-blue-600",children:a.used})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Unused"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.unused})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-secondary",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Expired"}),e.jsx("span",{className:"font-semibold text-red-600",children:a.expired})]})]})]},s)})})]})]})})]}),z&&e.jsx(ue,{isOpen:!0,codeType:z,onClose:()=>F(null),onGenerate:ee,isSubmitting:l})]}):e.jsx("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:e.jsx(G,{size:"lg"})})};export{Ne as default};
