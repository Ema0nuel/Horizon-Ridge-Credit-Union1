import{u as J,r as l,j as e,a as A,s as _}from"./index-nw5vX4eR.js";import{i as V}from"./adminAuth-Cqntgn8B.js";import{s as G}from"./api-CBahbCmN.js";import{H as Z,S as D}from"./SideBar-Dzs2tQP8.js";const ee=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),se=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),$=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),B=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),O=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),T=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})}),te=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),R=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),f=({label:n,name:r,type:m="text",value:o,onChange:i,placeholder:a,disabled:y=!1,error:c,required:u=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:[n,u&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsx("input",{type:m,name:r,value:o,onChange:i,placeholder:a,disabled:y,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans text-sm ${c?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${y?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`}),c&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:c})]}),W=({label:n,name:r,value:m,onChange:o,options:i,disabled:a=!1,error:y,required:c=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:[n,c&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsxs("select",{name:r,value:m,onChange:o,disabled:a,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans text-sm ${y?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${a?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`,children:[e.jsxs("option",{value:"",children:["Select ",n.toLowerCase()]}),i.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]}),y&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:y})]}),X=({mode:n,user:r,onClose:m,onSubmit:o,submitting:i})=>{const[a,y]=l.useState({full_name:r?.full_name||"",email:r?.email||"",phone_number:r?.phone_number||"",date_of_birth:r?.date_of_birth||"",nationality:r?.nationality||"",address:r?.address||"",city:r?.city||"",postal_code:r?.postal_code||"",country:r?.country||"",is_active:r?.is_active!==!1?"true":"false",kyc_status:r?.kyc_status||"pending"}),[c,u]=l.useState(""),[g,N]=l.useState({}),d=x=>{const{name:p,value:L}=x.target;y(C=>({...C,[p]:L})),g[p]&&N(C=>({...C,[p]:""}))},j=()=>{const x={};return a.full_name||(x.full_name="Full name is required"),a.email||(x.email="Email is required"),a.phone_number||(x.phone_number="Phone is required"),n==="create"&&!c&&(x.password="Password is required"),x},k=x=>{x.preventDefault();const p=j();if(Object.keys(p).length>0){N(p);return}o({...a,is_active:a.is_active==="true",password:n==="create"?c:void 0})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary",children:n==="create"?"Create New User":"Edit User"}),e.jsx("button",{onClick:m,disabled:i,className:"text-secondary opacity-60 hover:opacity-100 transition-all",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wider mb-4 opacity-80",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(f,{label:"Full Name",name:"full_name",value:a.full_name,onChange:d,placeholder:"John Doe",required:!0,error:g.full_name}),e.jsx(f,{label:"Email",name:"email",type:"email",value:a.email,onChange:d,placeholder:"john@example.com",disabled:n==="edit",required:!0,error:g.email}),e.jsx(f,{label:"Phone Number",name:"phone_number",value:a.phone_number,onChange:d,placeholder:"+31 6 XXXX XXXX",required:!0,error:g.phone_number}),e.jsx(f,{label:"Date of Birth",name:"date_of_birth",type:"date",value:a.date_of_birth,onChange:d,error:g.date_of_birth})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wider mb-4 opacity-80",children:"Address"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{label:"Address",name:"address",value:a.address,onChange:d,placeholder:"Street address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(f,{label:"City",name:"city",value:a.city,onChange:d,placeholder:"City"}),e.jsx(f,{label:"Postal Code",name:"postal_code",value:a.postal_code,onChange:d,placeholder:"Postal code"}),e.jsx(f,{label:"Country",name:"country",value:a.country,onChange:d,placeholder:"Country"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wider mb-4 opacity-80",children:"Account Status"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(W,{label:"Active Status",name:"is_active",value:a.is_active,onChange:d,options:[{value:"true",label:"Active"},{value:"false",label:"Suspended"}]}),e.jsx(W,{label:"KYC Status",name:"kyc_status",value:a.kyc_status,onChange:d,options:[{value:"pending",label:"Pending"},{value:"verified",label:"Verified"},{value:"rejected",label:"Rejected"},{value:"suspended",label:"Suspended"}]})]})]}),n==="create"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wider mb-4 opacity-80",children:"Credentials"}),e.jsx(f,{label:"Temporary Password",name:"password",type:"password",value:c,onChange:x=>{u(x.target.value),g.password&&N(p=>({...p,password:""}))},placeholder:"Enter password (min 8 characters)",required:!0,error:g.password}),e.jsx("p",{className:"text-xs text-secondary opacity-60 mt-2",children:"Password will be sent to user's email along with account number."})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-secondary",children:[e.jsx("button",{type:"button",onClick:m,disabled:i,className:"flex-1 py-3 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-secondary hover:bg-opacity-5 transition-all disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"flex-1 py-3 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"sm"})," Saving..."]}):n==="create"?e.jsxs(e.Fragment,{children:[e.jsx(te,{})," Create User"]}):e.jsxs(e.Fragment,{children:[e.jsx($,{})," Save Changes"]})})]})]})]})})},ae=({user:n,onConfirm:r,onCancel:m,submitting:o})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-secondary mb-4",children:"ðŸ—‘ï¸ Delete User"}),e.jsxs("p",{className:"text-secondary opacity-70 mb-6",children:["Are you sure you want to permanently delete"," ",e.jsx("span",{className:"font-semibold",children:n?.full_name})," and all their accounts? This action cannot be undone."]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-sm p-4 mb-6",children:e.jsx("p",{className:"text-sm text-red-800",children:"âš ï¸ This will soft-delete the user profile and all associated accounts from the system."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:m,disabled:o,className:"flex-1 py-2 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-secondary hover:bg-opacity-5 transition-all disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:r,disabled:o,className:"flex-1 py-2 px-4 bg-red-600 text-white font-semibold rounded-sm hover:bg-red-700 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"sm"})," Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{})," Delete User"]})})]})]})}),ce=()=>{const n=J(),[r,m]=l.useState(!1),[o,i]=l.useState(!1),[a,y]=l.useState(""),[c,u]=l.useState([]),[g,N]=l.useState(!0),[d,j]=l.useState(!1),[k,x]=l.useState(""),[p,L]=l.useState("all"),[C,M]=l.useState(!1),[S,U]=l.useState(null),[w,E]=l.useState(null),[I,b]=l.useState({type:"",text:""});l.useEffect(()=>{if(!V()){n("/user/admin/auth/login",{replace:!0});return}m(!0);const t=sessionStorage.getItem("admin_email")||"admin@example.com";y(t)},[n]),l.useEffect(()=>{if(!r)return;(async()=>{try{N(!0);const{data:t,error:h}=await _.from("user_profiles").select("*").eq("is_deleted",!1).order("created_at",{ascending:!1});if(h)throw h;u(t||[])}catch(t){console.error("[ADMIN_USERS] Fetch error:",t),b({type:"error",text:"Failed to load users"})}finally{N(!1)}})()},[r]);const Y=async s=>{j(!0);try{const{data:t,error:h}=await _.auth.signUp({email:s.email,password:s.password,options:{data:{full_name:s.full_name}}});if(h)throw new Error(h.message);const v=t.user?.id;if(!v)throw new Error("Failed to create auth user");const{error:q}=await _.from("user_profiles").insert({id:v,email:s.email,full_name:s.full_name,phone_number:s.phone_number,date_of_birth:s.date_of_birth||null,nationality:s.nationality||null,address:s.address||null,city:s.city||null,postal_code:s.postal_code||null,country:s.country||null,kyc_status:s.kyc_status,is_active:s.is_active,metadata:{},feature_flags:{}});if(q)throw new Error(q.message);const P=Math.floor(Math.random()*9e9+1e9).toString(),{error:H}=await _.from("accounts").insert({user_id:v,account_number:P,account_type:"checking",currency:"USD",status:"active",balance:0,available_balance:0,metadata:{},feature_flags:{},settings:{}});if(H)throw new Error(H.message);try{await re(s.email,s.full_name,P,s.password)}catch(z){console.warn("[ADMIN_USERS] Email send failed (non-critical):",z)}u(z=>[{id:v,email:s.email,full_name:s.full_name,phone_number:s.phone_number,date_of_birth:s.date_of_birth||null,nationality:s.nationality||null,address:s.address||null,city:s.city||null,postal_code:s.postal_code||null,country:s.country||null,kyc_status:s.kyc_status,is_active:s.is_active,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_login:null,is_deleted:!1},...z]),b({type:"success",text:`âœ… User created! Account #: ${P}`}),M(!1),setTimeout(()=>b({type:"",text:""}),4e3)}catch(t){console.error("[ADMIN_USERS] Create error:",t),b({type:"error",text:t?.message||"Failed to create user"})}finally{j(!1)}},Q=async s=>{j(!0);try{const{error:t}=await _.from("user_profiles").update({full_name:s.full_name,phone_number:s.phone_number,date_of_birth:s.date_of_birth||null,nationality:s.nationality||null,address:s.address||null,city:s.city||null,postal_code:s.postal_code||null,country:s.country||null,kyc_status:s.kyc_status,is_active:s.is_active,updated_at:new Date().toISOString()}).eq("id",S.id);if(t)throw t;u(h=>h.map(v=>v.id===S.id?{...v,full_name:s.full_name,phone_number:s.phone_number,date_of_birth:s.date_of_birth||null,nationality:s.nationality||null,address:s.address||null,city:s.city||null,postal_code:s.postal_code||null,country:s.country||null,kyc_status:s.kyc_status,is_active:s.is_active,updated_at:new Date().toISOString()}:v)),b({type:"success",text:"âœ… User updated successfully"}),U(null),setTimeout(()=>b({type:"",text:""}),3e3)}catch(t){console.error("[ADMIN_USERS] Update error:",t),b({type:"error",text:t?.message||"Failed to update user"})}finally{j(!1)}},K=async()=>{j(!0);try{const{error:s}=await _.rpc("soft_delete_user",{p_user_id:w.id,p_reason:"Deleted by admin",p_admin_id:null});if(s){const{error:t}=await _.from("user_profiles").update({is_deleted:!0,deleted_at:new Date().toISOString(),deleted_reason:"Deleted by admin",is_active:!1}).eq("id",w.id);if(t)throw t;await _.from("accounts").update({is_deleted:!0,deleted_at:new Date().toISOString(),deleted_reason:"User deleted",status:"closed"}).eq("user_id",w.id)}u(t=>t.filter(h=>h.id!==w.id)),b({type:"success",text:"âœ… User deleted successfully"}),E(null),setTimeout(()=>b({type:"",text:""}),3e3)}catch(s){console.error("[ADMIN_USERS] Delete error:",s),b({type:"error",text:s?.message||"Failed to delete user"})}finally{j(!1)}},F=c.filter(s=>{const t=s.full_name?.toLowerCase().includes(k.toLowerCase())||s.email?.toLowerCase().includes(k.toLowerCase()),h=p==="all"||p==="active"&&s.is_active||p==="suspended"&&!s.is_active;return t&&h});return r?e.jsxs("div",{className:"min-h-screen bg-primary",children:[e.jsx(Z,{adminEmail:a,onMenuToggle:()=>i(!o)}),e.jsxs("div",{className:"flex",children:[e.jsx(D,{isOpen:o,onClose:()=>i(!1)}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-secondary mb-2",children:"User Management"}),e.jsx("p",{className:"text-sm text-secondary opacity-70",children:"Click any user to view & edit their complete profile, accounts, and balances"})]}),I.text&&e.jsx("div",{className:`mb-6 p-4 rounded-sm border-l-4 ${I.type==="success"?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:e.jsx("p",{className:"text-sm font-semibold",children:I.text})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-stretch sm:items-center justify-between",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary opacity-60",children:e.jsx(ee,{})}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:k,onChange:s=>x(s.target.value),className:"w-full pl-12 pr-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm"})]}),e.jsxs("select",{value:p,onChange:s=>L(s.target.value),className:"px-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm bg-primary",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"suspended",children:"Suspended Only"})]}),e.jsxs("button",{onClick:()=>M(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95 whitespace-nowrap",children:[e.jsx(se,{}),e.jsx("span",{children:"Create User"})]})]}),g?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(A,{size:"lg"})}):F.length===0?e.jsx("div",{className:"bg-primary border border-secondary rounded-sm p-12 text-center",children:e.jsx("p",{className:"text-secondary opacity-70",children:"No users found"})}):e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm shadow-md overflow-hidden",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-secondary bg-opacity-5 border-b border-secondary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"KYC"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-secondary uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-secondary uppercase tracking-wider",children:"Quick Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-secondary",children:F.map(s=>e.jsxs("tr",{className:"hover:bg-secondary hover:bg-opacity-5 transition-colors cursor-pointer group",onClick:()=>n(`/admin/user/${s.id}`),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-basic group-hover:opacity-80 transition-all",children:s.full_name}),e.jsx(R,{className:"opacity-0 group-hover:opacity-100 transition-opacity text-basic"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:s.phone_number||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[s.is_active?e.jsx(O,{}):e.jsx(T,{}),s.is_active?"Active":"Suspended"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded capitalize ${s.kyc_status==="verified"?"bg-green-100 text-green-800":s.kyc_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.kyc_status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-secondary opacity-70",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(s),className:"p-2 hover:bg-basic hover:bg-opacity-10 rounded-sm transition-all",title:"Quick edit",children:e.jsx($,{})}),e.jsx("button",{onClick:()=>E(s),className:"p-2 hover:bg-red-500 hover:bg-opacity-10 rounded-sm transition-all text-red-600",title:"Delete user",children:e.jsx(B,{})})]})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-secondary",children:F.map(s=>e.jsxs("button",{onClick:()=>n(`/admin/user/${s.id}`),className:"w-full p-4 hover:bg-secondary hover:bg-opacity-5 transition-colors text-left active:scale-95",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-basic text-sm",children:s.full_name}),e.jsx(R,{className:"w-4 h-4 text-basic opacity-60"})]}),e.jsx("p",{className:"text-xs text-secondary opacity-60 mt-1",children:s.email})]}),e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold flex-shrink-0 ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?e.jsx(O,{}):e.jsx(T,{})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Phone"}),e.jsx("p",{className:"font-semibold text-secondary text-sm",children:s.phone_number||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"KYC"}),e.jsx("p",{className:`font-semibold capitalize text-sm ${s.kyc_status==="verified"?"text-green-600":s.kyc_status==="pending"?"text-yellow-600":"text-red-600"}`,children:s.kyc_status})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-secondary",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),U(s)},className:"flex-1 py-2 px-3 text-xs font-semibold border border-secondary text-secondary rounded-sm hover:bg-secondary hover:bg-opacity-5 transition-all flex items-center justify-center gap-1",children:[e.jsx($,{})," Edit"]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),E(s)},className:"flex-1 py-2 px-3 text-xs font-semibold bg-red-100 text-red-600 rounded-sm hover:bg-red-200 transition-all flex items-center justify-center gap-1",children:[e.jsx(B,{})," Delete"]})]})]},s.id))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary opacity-60 mb-1",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-basic",children:c.length})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary opacity-60 mb-1",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.filter(s=>s.is_active).length})]}),e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-4 text-center",children:[e.jsx("p",{className:"text-sm text-secondary opacity-60 mb-1",children:"Suspended"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.filter(s=>!s.is_active).length})]})]})]})})]}),C&&e.jsx(X,{mode:"create",onClose:()=>M(!1),onSubmit:Y,submitting:d}),S&&e.jsx(X,{mode:"edit",user:S,onClose:()=>U(null),onSubmit:Q,submitting:d}),w&&e.jsx(ae,{user:w,onConfirm:K,onCancel:()=>E(null),submitting:d})]}):e.jsx("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:e.jsx(A,{size:"lg"})})};async function re(n,r,m,o){try{const i="Welcome to Horizon Ridge Credit Union â€“ Your Account Details",a=`
      <!DOCTYPE html>
      <html>
        <head><meta charset="UTF-8" /></head>
        <body style="font-family: 'Montserrat', sans-serif; color: #1b1b1b; line-height: 1.6;">
          <div style="max-width: 600px; margin: 0 auto; background: #fff; border: 1px solid #1b1b1b; border-radius: 3px;">
            <div style="background: #1b1b1b; color: #fff; padding: 30px; text-align: center;">
              <h1 style="margin: 0; font-size: 28px;">Welcome to Horizon Ridge Credit Union</h1>
              <p style="margin: 10px 0 0 0; opacity: 0.9;">Your Banking Partner</p>
            </div>
            <div style="padding: 30px;">
              <p>Hello <strong>${r}</strong>,</p>
              <p>Your account has been successfully created by an administrator. Here are your credentials:</p>
              <div style="background: #f9f9f9; border-left: 4px solid #1b9466; padding: 20px; margin: 20px 0; border-radius: 3px;">
                <p><strong>ðŸ” Account Number:</strong></p>
                <code style="font-family: monospace; background: #fff; padding: 8px; border-radius: 2px; display: inline-block; margin-bottom: 15px;">${m}</code>
                <p style="margin-top: 15px;"><strong>ðŸ”‘ Temporary Password:</strong></p>
                <code style="font-family: monospace; background: #fff; padding: 8px; border-radius: 2px; display: inline-block;">${o}</code>
                <p style="font-size: 12px; color: #666; margin-top: 15px;">âš ï¸ Please change your password immediately after your first login.</p>
              </div>
              <p><strong>Next Steps:</strong></p>
              <ol style="color: #666; font-size: 14px;">
                <li>Log in with your account number and temporary password</li>
                <li>Change your password to something secure</li>
                <li>Update your profile and security settings</li>
              </ol>
              <p>If you have any questions, please contact our support team.</p>
              <hr style="border: none; border-top: 1px solid #e0e0e0; margin: 20px 0;" />
              <p style="font-size: 12px; color: #999; margin: 0;">
                Best regards,<br/>
                <strong>Horizon Ridge Credit Union Admin Team</strong><br/>
                Â© ${new Date().getFullYear()} Horizon Ridge Credit Union Bank. All rights reserved.
              </p>
            </div>
          </div>
        </body>
      </html>
    `;await G({to:n,subject:i,html:a}),console.log("[EMAIL] Welcome email sent to:",n)}catch(i){throw console.error("[EMAIL] Failed to send welcome email:",i.message),i}}export{ce as default};
