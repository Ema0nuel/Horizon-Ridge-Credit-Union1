import{C as i,d as m,u as g,r as l,j as e,L as j,e as v,b}from"./index-BaOxJvox.js";import{a as k}from"./adminAuth-L83m0e2d.js";const c={logUnauthorizedAccess:(s,t,n={})=>{const a={user:t?.email||"Unknown",timestamp:new Date().toISOString(),...n};i.isDevMode&&m.unauthorized(s,a),c.reportToBackend("unauthorized_access",{action:s,...a})},detectInjection:(s,t="unknown")=>{[/<script/i,/javascript:/i,/onerror=/i,/onclick=/i,/eval\(/i].some(a=>a.test(s))&&(i.isDevMode&&m.securityBreach("injection","critical"),c.reportToBackend("injection_detected",{payload:s.substring(0,100),source:t}))},auditAdminAction:(s,t,n)=>{const a={action:s,resource:t,result:n,timestamp:new Date().toISOString(),admin:sessionStorage.getItem("adminEmail")||"unknown"};i.isDevMode&&(console.log("%câœ… ADMIN ACTION AUDIT","color: #4caf50; font-weight: bold; font-size: 12px;"),console.table(a)),c.reportToBackend("admin_action",a)},reportToBackend:async function(s,t){try{await fetch("/api/security/log-event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:s,data:t,timestamp:new Date().toISOString(),userAgent:navigator.userAgent})}).catch(()=>{})}catch(n){console.error(n)}}},L=({adminEmail:s,onMenuToggle:t})=>{const n=g(),[a,r]=l.useState(""),[d,o]=l.useState(new Date);l.useEffect(()=>{const h=()=>{const x=new Date().getHours();x<12?r("Good Morning"):x<18?r("Good Afternoon"):r("Good Evening"),o(new Date)};h();const u=setInterval(h,6e4);return i.isDevMode?m.warn("âš ï¸ ADMIN ACCESS DETECTED","You are accessing a restricted administrative interface.","danger",{emoji:"ðŸ”",metadata:{panel:"Admin Dashboard",accessTime:new Date().toISOString()}}):c.auditAdminAction("dashboard_accessed","admin_panel","success"),()=>clearInterval(u)},[]);const p=()=>{k(),n("/user/admin/auth/login",{replace:!0})};return e.jsx("header",{className:"sticky top-0 z-50 bg-primary border-b border-secondary shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-sm hover:bg-secondary hover:bg-opacity-10 transition-colors","aria-label":"Toggle menu",title:"Toggle navigation menu",children:e.jsx("svg",{className:"w-6 h-6 text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:j,alt:"Summit Ridge Credit Union",className:"h-8 sm:h-10"}),e.jsxs("div",{className:"hidden sm:block border-l border-secondary pl-3",children:[e.jsx("p",{className:"text-xs font-semibold text-secondary uppercase tracking-wider opacity-80",children:"Admin Panel"}),e.jsx("p",{className:"text-xs text-secondary opacity-60",children:"Management"})]})]}),e.jsxs("div",{className:"hidden md:block border-l border-secondary pl-4",children:[e.jsx("h1",{className:"text-lg font-bold text-secondary",children:a}),e.jsx("p",{className:"text-xs text-secondary opacity-60",children:s})]}),e.jsxs("div",{className:"md:hidden border-l border-secondary pl-3",children:[e.jsx("p",{className:"text-sm font-semibold text-secondary",children:a}),e.jsx("p",{className:"text-xs text-secondary opacity-60",children:d.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("button",{onClick:p,className:"px-3 sm:px-4 py-2 rounded-sm bg-red-600 text-white font-semibold text-xs sm:text-sm hover:bg-red-700 transition-colors active:scale-95","aria-label":"Logout",title:"Sign out from admin panel",children:[e.jsx("span",{className:"hidden sm:inline",children:"Logout"}),e.jsx("span",{className:"sm:hidden",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})},y=({name:s})=>({Dashboard:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-3m0 0l-2-3m2 3h18M3 12h18"})}),Users:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 8.646 4 4 0 010-8.646M3 20.394A9.002 9.002 0 0112.75 16c4.478 0 8.268 2.943 9.542 7.084"})}),Transactions:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),Loans:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Emails:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Manage Codes":e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})})[s]||null,f=({name:s,path:t,isActive:n,onClick:a})=>e.jsxs(b,{to:t,onClick:a,className:`flex items-center gap-3 px-4 py-3 rounded-sm transition-all ${n?"bg-basic text-primary font-semibold shadow-md":"text-secondary hover:bg-secondary hover:bg-opacity-10"}`,"aria-current":n?"page":void 0,children:[e.jsx(y,{name:s}),e.jsx("span",{className:"text-sm font-medium",children:s})]}),M=({isOpen:s,onClose:t})=>{const a=v().pathname,r=[{name:"Dashboard",path:"/admin/dashboard"},{name:"Users",path:"/admin/users"},{name:"Transactions",path:"/admin/transactions"},{name:"Loans",path:"/admin/loans"},{name:"Emails",path:"/admin/emails"},{name:"Manage Codes",path:"/admin/codes"}],d=o=>a===o;return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 lg:hidden z-40",onClick:t,"aria-hidden":"true"}),e.jsxs("aside",{className:`fixed left-0 top-0 h-screen w-64 bg-primary border-r border-secondary shadow-lg transition-transform duration-300 z-40 lg:z-0 lg:translate-x-0 lg:sticky lg:top-0 overflow-y-auto ${s?"translate-x-0":"-translate-x-full"}`,role:"navigation","aria-label":"Admin navigation",children:[e.jsx("nav",{className:"p-4 space-y-2 pt-20",children:r.map(o=>e.jsx(f,{name:o.name,path:o.path,isActive:d(o.path),onClick:t},o.name))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-secondary bg-secondary bg-opacity-5",children:e.jsxs("div",{className:"text-xs text-secondary opacity-70 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:"Admin Portal v1.0"}),e.jsxs("p",{children:["Ã‚Â© ",new Date().getFullYear()," Summit Ridge Credit Union Bank"]}),e.jsxs("p",{className:"text-xs opacity-50 mt-2",children:["Last updated: ",new Date().toLocaleDateString()]})]})})]})]})};export{L as H,M as S};
