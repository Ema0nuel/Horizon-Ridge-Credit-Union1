import{u as ae,r as n,s as g,j as e,a as E}from"./index-nw5vX4eR.js";import{s as re}from"./api-CBahbCmN.js";import{U as oe}from"./UserHeader-LSGpS8F-.js";import{h as ne}from"./authService-BzjFe2h-.js";const v=[{id:"kpn",name:"KPN",color:"bg-green-600",desc:"KPN Mobile Network"},{id:"vodafoneziggo",name:"Vodafone",color:"bg-red-600",desc:"Vodafone Netherlands Network"},{id:"tmobile",name:"T-Mobile",color:"bg-pink-600",desc:"T-Mobile Netherlands Network"},{id:"tele2",name:"Tele2",color:"bg-black",desc:"Tele2 Mobile Network"}],ie=({networkId:o})=>{const t={mtn:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),vodafone:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 2c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 8c-3.314 0-6 2.686-6 6v2h12v-2c0-3.314-2.686-6-6-6z"})}),airtel:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),glo:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 21a9 9 0 100-18 9 9 0 000 18zm0-2a7 7 0 100-14 7 7 0 000 14z"})}),"9mobile":e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2a2 2 0 002 2h2a2 2 0 002-2V3m0 18v-2a2 2 0 00-2-2h-2a2 2 0 00-2 2v2m9-13a9 9 0 11-18 0 9 9 0 0118 0z"})})};return e.jsx("div",{className:"text-white group-hover:text-opacity-90 transition-all",children:t[o]||t.mtn})},L=({label:o,name:t,type:l="text",value:c,onChange:f,placeholder:d,required:x=!1,error:u,disabled:m=!1,maxLength:T,min:w,max:O,step:k})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:[o,x&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsx("input",{type:l,name:t,value:c,onChange:f,placeholder:d,disabled:m,maxLength:T,min:w,max:O,step:k,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans ${u?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${m?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`}),u&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:u})]}),ce=({label:o,name:t,value:l,onChange:c,options:f,required:d=!1,error:x,disabled:u=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:[o,d&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsxs("select",{name:t,value:l,onChange:c,disabled:u,className:`w-full px-4 py-3 border rounded-sm focus:outline-none focus:ring-2 transition-all font-sans ${x?"border-red-500 focus:ring-red-500 focus:ring-opacity-50":"border-secondary focus:ring-basic focus:ring-opacity-30"} ${u?"bg-gray-100 opacity-50 cursor-not-allowed":"bg-primary"}`,children:[e.jsxs("option",{value:"",children:["Select ",o.toLowerCase()]}),f.map(m=>e.jsx("option",{value:m.id||m.value,children:m.label},m.id||m.value))]}),x&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:x})]}),le=({network:o,isSelected:t,onClick:l})=>e.jsxs("button",{onClick:l,className:`flex flex-col items-center gap-3 p-4 sm:p-6 rounded-sm border transition-all active:scale-95 w-full text-center group ${t?"border-basic bg-primary shadow-lg":"border-secondary bg-primary hover:border-basic hover:shadow-md"}`,"aria-pressed":t,children:[e.jsx("div",{className:`w-16 h-16 ${o.color} rounded-full flex items-center justify-center`,children:e.jsx(ie,{networkId:o.id})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-secondary text-sm",children:o.name}),e.jsx("p",{className:"text-xs text-secondary opacity-70 mt-1",children:o.desc})]}),t&&e.jsx("div",{className:"text-basic font-bold text-lg",children:"✔️"})]}),de=(o,t,l,c)=>`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Montserrat', 'Segoe UI', sans-serif; background: linear-gradient(135deg, #1b9466b9 0%, #1b1b1b 100%); margin: 0; padding: 20px; }
    .container { max-width: 600px; margin: 0 auto; background: #fff; border-radius: 3px; box-shadow: 0 4px 12px rgba(27, 148, 102, 0.15); overflow: hidden; }
    .header { background: linear-gradient(135deg, #1b9466b9 0%, #1b1b1b 100%); color: #fff; padding: 40px 20px; text-align: center; }
    .header h1 { margin: 0; font-size: 28px; font-weight: bold; }
    .content { padding: 40px 20px; color: #1b1b1b; }
    .otp-box { background: #f5f5f5; border-left: 4px solid #1b9466b9; border-radius: 3px; padding: 20px; margin: 20px 0; text-align: center; }
    .otp-code { font-size: 48px; font-weight: bold; color: #1b9466b9; letter-spacing: 8px; font-family: 'Courier New', monospace; }
    .otp-label { color: #666; font-size: 14px; margin-top: 10px; }
    .details { background: #f5f5f5; border-radius: 3px; padding: 20px; margin: 20px 0; }
    .detail-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #ddd; }
    .detail-row:last-child { border-bottom: none; }
    .detail-label { color: #666; font-weight: 500; font-size: 14px; }
    .detail-value { color: #1b1b1b; font-weight: bold; text-align: right; }
    .warning { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; border-radius: 3px; margin: 20px 0; color: #856404; font-size: 14px; }
    .footer { background: #f5f5f5; padding: 20px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #ddd; }
    p { margin: 0 0 15px 0; font-size: 14px; line-height: 1.6; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ðŸ“± Airtime Purchase Verification</h1>
      <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 14px;">One-Time Password (OTP)</p>
    </div>
    <div class="content">
      <p>Hello,</p>
      <p>We received a request to purchase airtime on your Horizon Ridge Credit Union account. Please use the verification code below to confirm your purchase:</p>
      
      <div class="otp-box">
        <div class="otp-code">${o}</div>
        <div class="otp-label">Valid for 5 minutes</div>
      </div>

      <div class="details">
        <div class="detail-row">
          <span class="detail-label">Network:</span>
          <span class="detail-value">${c}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Phone Number:</span>
          <span class="detail-value">${t}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Amount:</span>
          <span class="detail-value">${l}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Timestamp:</span>
          <span class="detail-value">${new Date().toLocaleString()}</span>
        </div>
      </div>

      <div class="warning">
        <strong>âš ï¸ Important:</strong> Never share this code with anyone. Horizon Ridge Credit Union staff will never ask for your OTP.
      </div>

      <p>If you did not request this airtime purchase, please ignore this email and contact our support team immediately.</p>
    </div>
    <div class="footer">
      <p>&copy; 2026 Horizon Ridge Credit Union Bank. All rights reserved.</p>
      <p>This is an automated message. Please do not reply to this email.</p>
    </div>
  </div>
</body>
</html>
`,me=({isOpen:o,transaction:t,account:l,profile:c,onClose:f})=>{if(!o||!t)return null;const d=v.find(x=>x.id===t.metadata?.network);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-2xl max-w-md w-full max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"bg-basic text-primary p-6 text-center",children:[e.jsx("div",{className:"text-5xl mb-3",children:"ðŸ“±"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Horizon Ridge Credit Union"}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Airtime Receipt"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"text-center py-3 bg-yellow-50 border border-yellow-200 rounded-sm",children:e.jsx("p",{className:"text-sm font-semibold text-yellow-800",children:"Pending Admin Approval"})}),e.jsxs("div",{className:"space-y-3 text-sm border-b border-secondary pb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Reference:"}),e.jsx("span",{className:"font-mono font-semibold text-secondary",children:t.reference_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Date:"}),e.jsx("span",{className:"font-semibold text-secondary",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-secondary opacity-70",children:"Time:"}),e.jsx("span",{className:"font-semibold text-secondary",children:new Date().toLocaleTimeString()})]})]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 mb-1",children:"Amount"}),e.jsxs("p",{className:"text-3xl font-bold text-basic",children:[t.currency," ",parseFloat(t.amount).toFixed(2)]})]}),e.jsxs("div",{className:"text-sm border-b border-secondary pb-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-70 text-xs uppercase tracking-wider mb-1",children:"Network"}),e.jsx("p",{className:"font-semibold text-secondary capitalize",children:d?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-70 text-xs uppercase tracking-wider mb-1",children:"Phone Number"}),e.jsx("p",{className:"font-semibold text-secondary font-mono",children:t.metadata?.phone_number})]})]}),e.jsxs("div",{className:"text-sm border-b border-secondary pb-4",children:[e.jsx("p",{className:"text-secondary opacity-70 text-xs uppercase tracking-wider mb-1",children:"Purchased From"}),e.jsx("p",{className:"font-semibold text-secondary",children:l?.account_number}),e.jsx("p",{className:"text-xs text-secondary opacity-70 mt-1",children:c?.full_name})]}),t.description&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-secondary opacity-70 text-xs uppercase tracking-wider mb-1",children:"Description"}),e.jsx("p",{className:"text-secondary",children:t.description})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 border-t border-secondary text-center",children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 mb-4",children:"Your airtime purchase will be processed once approved by our team"}),e.jsx("button",{onClick:f,className:"w-full py-2 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95",children:"Close"})]})]})})},pe=o=>{const t=o.replace(/\D/g,"");return t.length===0?"":t.length<=3?t:t.length<=7?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,7)}-${t.slice(7,11)}`},xe=o=>{const t=o.replace(/\D/g,"");return t.length>=10&&t.length<=15};function ye(){const o=ae(),[t,l]=n.useState(null),[c,f]=n.useState(null),[d,x]=n.useState([]),[u,m]=n.useState(!0),[T,w]=n.useState(""),[O,k]=n.useState(!1),[M,S]=n.useState(!1),[V,F]=n.useState(!1),[a,N]=n.useState({fromAccountId:"",phoneNumber:"",network:"",amount:"",description:""}),[$,A]=n.useState(""),[H,W]=n.useState(null),[Y,K]=n.useState(null),[G,q]=n.useState(null),[U,B]=n.useState(null),[j,y]=n.useState({}),[z,b]=n.useState({type:"",text:""}),[_,C]=n.useState(!1);n.useEffect(()=>{let s=!0;return(async()=>{try{const{data:{session:r}={}}=await g.auth.getSession(),i=r?.user?.id;if(!i){o("/auth/login",{replace:!0});return}l(i);const{data:p}=await g.from("user_profiles").select("*").eq("id",i).eq("is_deleted",!1).maybeSingle(),{data:h}=await g.from("accounts").select("*").eq("user_id",i).eq("is_deleted",!1).order("created_at",{ascending:!1});s&&(f(p),x(h||[]),h?.length>0&&N(I=>({...I,fromAccountId:h[0].id})))}catch(r){console.error("[BUY_AIRTIME] Load error:",r),b({type:"error",text:"Failed to load account data"})}finally{s&&m(!1)}})(),()=>{s=!1}},[o]);const P=s=>{let{name:r,value:i}=s.target;r==="phoneNumber"&&(i=pe(i)),N(p=>({...p,[r]:i})),j[r]&&y(p=>({...p,[r]:""}))},J=[{id:"500",label:"500",value:"500"},{id:"1000",label:"1,000",value:"1000"},{id:"2000",label:"2,000",value:"2000"},{id:"5000",label:"5,000",value:"5000"},{id:"10000",label:"10,000",value:"10000"}],Q=()=>{const s={};a.fromAccountId||(s.fromAccountId="Select account"),(!a.phoneNumber||!xe(a.phoneNumber))&&(s.phoneNumber="Enter valid phone number (10-15 digits)"),a.network||(s.network="Select network"),(!a.amount||parseFloat(a.amount)<=0)&&(s.amount="Enter valid amount"),parseFloat(a.amount)>5e4&&(s.amount="Amount exceeds maximum limit (50,000)");const r=d.find(i=>i.id===a.fromAccountId);return r&&parseFloat(a.amount)>parseFloat(r.balance||0)&&(s.amount="Insufficient balance"),y(s),Object.keys(s).length===0},X=async s=>{if(s.preventDefault(),!!Q()){C(!0),b({type:"",text:""});try{const{data:r,error:i}=await g.from("codes").select("*").eq("code_type","transfer_otp").eq("is_used",!1).gt("expires_at",new Date().toISOString()).limit(1).single();if(i||!r)throw new Error("No available OTP codes. Please try again later.");const p=v.find(h=>h.id===a.network);await re({to:c?.email,subject:"Your Horizon Ridge Credit Union Airtime Purchase Verification Code",html:de(r.code,a.phoneNumber,`$${parseFloat(a.amount).toFixed(2)}`,p?.name||"Network")}),K(r),W(r.id),S(!0),b({type:"success",text:`OTP sent to ${c?.email}`})}catch(r){console.error("[BUY_AIRTIME] OTP request error:",r),b({type:"error",text:r.message||"Failed to send OTP"})}finally{C(!1)}}},Z=async s=>{if(s.preventDefault(),!$.trim()){y({otpCode:"Enter OTP code"});return}if($!==Y?.code){y({otpCode:"Invalid OTP code"});return}C(!0),b({type:"",text:""});try{const r=d.find(R=>R.id===a.fromAccountId),i=parseFloat(a.amount),p=v.find(R=>R.id===a.network);await g.from("codes").update({is_used:!0,used_at:new Date().toISOString(),used_by_user_id:t}).eq("id",H);const{data:h,error:I}=await g.from("transactions").insert([{from_account_id:a.fromAccountId,to_account_id:null,amount:i,currency:r?.currency||"NGN",transaction_type:"airtime",status:"pending",description:a.description||`Airtime purchase - ${p?.name} - ${a.phoneNumber}`,reference_number:`AIR-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,initiated_by_user_id:t,metadata:{transaction_type:"airtime",network:a.network,network_name:p?.name,phone_number:a.phoneNumber,otp_verified_at:new Date().toISOString(),awaiting_admin_approval:!0}}]).select("*").single();if(I)throw I;const te=parseFloat(r.balance||0)-i;await g.from("accounts").update({balance:te}).eq("id",a.fromAccountId),q(h),B("pending"),S(!1),A(""),F(!0),b({type:"success",text:`Airtime purchase submitted! Reference: ${h.reference_number}`})}catch(r){console.error("[BUY_AIRTIME] OTP verification error:",r),b({type:"error",text:r.message||"Verification failed"})}finally{C(!1)}},ee=()=>{N({fromAccountId:d[0]?.id||"",phoneNumber:"",network:"",amount:"",description:""}),y({}),b({type:"",text:""}),k(!1),S(!1),A(""),q(null),B(null),F(!1),w("")};if(u)return e.jsx("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:e.jsx(E,{size:"lg"})});if(!t)return null;const se=d.map(s=>({id:s.id,label:`${s.account_number} (${s.account_type}) - ${s.currency} ${parseFloat(s.balance||0).toFixed(2)}`})),D=d.find(s=>s.id===a.fromAccountId);return e.jsxs("div",{className:"min-h-screen bg-primary",children:[e.jsx(oe,{profile:c,handleSignOut:()=>ne(o)}),e.jsxs("main",{className:"container mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-2 text-xs sm:text-sm text-secondary opacity-70",children:[e.jsx("button",{onClick:()=>o("/dashboard"),className:"hover:opacity-100 font-bold",children:"< Dashboard"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-semibold opacity-100",children:"Buy Airtime"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-secondary mb-2",children:"Buy Airtime"}),e.jsx("p",{className:"text-sm sm:text-base text-secondary opacity-70",children:"Purchase airtime for any network instantly"})]}),z.text&&e.jsx("div",{className:`mb-6 p-4 sm:p-6 rounded-sm border-l-4 ${z.type==="success"?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:e.jsx("p",{className:"text-sm font-semibold",children:z.text})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-md p-6 sticky top-24",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-secondary mb-4",children:"Select Network"}),e.jsx("div",{className:"space-y-3",children:v.map(s=>e.jsx(le,{network:s,isSelected:T===s.id,onClick:()=>{w(s.id),N(r=>({...r,network:s.id})),k(!0),y({})}},s.id))})]})}),O&&e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-md p-6 sm:p-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-secondary mb-6",children:"Airtime Purchase"}),!M&&U!=="pending"?e.jsxs("form",{onSubmit:X,children:[e.jsx(ce,{label:"From Account",name:"fromAccountId",value:a.fromAccountId,onChange:P,options:se,required:!0,error:j.fromAccountId}),e.jsx(L,{label:"Phone Number",name:"phoneNumber",type:"tel",value:a.phoneNumber,onChange:P,placeholder:"Enter phone number",maxLength:"15",required:!0,error:j.phoneNumber}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:["Select Amount",e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:J.map(s=>e.jsx("button",{type:"button",onClick:()=>N(r=>({...r,amount:s.value})),className:`py-2 px-3 rounded-sm font-semibold text-sm transition-all active:scale-95 ${a.amount===s.value?"bg-basic text-primary border border-basic":"border border-secondary text-secondary hover:bg-gray-50"}`,children:s.label},s.id))}),j.amount&&e.jsx("p",{className:"text-xs text-red-600 mt-2",children:j.amount})]}),e.jsx(L,{label:"Custom Amount (Optional)",name:"amount",type:"number",step:"100",min:"100",max:"50000",value:a.amount,onChange:P,placeholder:"Or enter custom amount"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-secondary mb-2 uppercase tracking-wider opacity-80",children:"Description (Optional)"}),e.jsx("textarea",{name:"description",value:a.description,onChange:P,placeholder:"Add a note for this purchase",rows:"3",className:"w-full px-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 font-sans bg-primary"})]}),a.amount&&D&&e.jsxs("div",{className:"mb-6 p-4 sm:p-6 rounded-sm border border-secondary bg-primary shadow-sm space-y-4",children:[e.jsx("h4",{className:"font-semibold text-secondary text-base",children:"Summary"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"From Account:"}),e.jsx("span",{className:"font-semibold text-secondary",children:D.account_number})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"Network:"}),e.jsx("span",{className:"font-semibold text-secondary capitalize",children:v.find(s=>s.id===a.network)?.name||"Select Network"})]}),e.jsxs("div",{className:"flex justify-between pb-3 border-b border-secondary opacity-70",children:[e.jsx("span",{className:"text-secondary",children:"Phone Number:"}),e.jsx("span",{className:"font-semibold text-secondary font-mono",children:a.phoneNumber||"---"})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("span",{className:"font-semibold text-secondary",children:"Amount:"}),e.jsxs("span",{className:"font-bold text-basic text-lg",children:["$",parseFloat(a.amount||0).toFixed(2)]})]})]})]}),e.jsx("button",{type:"submit",disabled:_,className:"w-full py-3 px-6 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx(E,{size:"sm"})," Sending OTP..."]}):"Request OTP & Continue"})]}):M&&U!=="pending"?e.jsxs("form",{onSubmit:Z,children:[e.jsx("div",{className:"mb-6 p-4 sm:p-6 rounded-sm border border-secondary bg-primary",children:e.jsxs("p",{className:"text-secondary text-sm",children:["OTP code sent to"," ",e.jsx("strong",{className:"text-basic",children:c?.email}),". Valid for 5 minutes."]})}),e.jsx(L,{label:"Enter OTP Code",name:"otpCode",value:$,onChange:s=>{A(s.target.value),y({})},placeholder:"000000",required:!0,error:j.otpCode}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{S(!1),A("")},className:"flex-1 py-3 px-6 border border-secondary text-secondary font-semibold rounded-sm hover:bg-gray-50 transition-all active:scale-95",children:"Back"}),e.jsx("button",{type:"submit",disabled:_,className:"flex-1 py-3 px-6 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx(E,{size:"sm"})," Verifying..."]}):"Verify & Complete"})]})]}):null]})})]})]}),e.jsx(me,{isOpen:V,transaction:G,account:D,profile:c,onClose:()=>{F(!1),setTimeout(()=>{ee(),o("/dashboard")},1500)}})]})}export{ye as BuyAirtimePage,ye as default};
