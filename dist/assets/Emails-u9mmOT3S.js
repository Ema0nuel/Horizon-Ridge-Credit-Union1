import{r as o,s as S,u as F,j as e,a as C,R as H}from"./index-C7IEQRLs.js";import{i as O}from"./adminAuth-L83m0e2d.js";import{H as U,S as q}from"./SideBar-BD2DWRfl.js";import{s as P,m as V}from"./api-CBahbCmN.js";function J(){const[i,c]=o.useState([]),[s,p]=o.useState([]),[f,l]=o.useState(!1),[b,a]=o.useState(""),[h,m]=o.useState(""),y=o.useCallback(async()=>{try{l(!0),a("");const{data:r,error:t}=await S.from("inbound_emails").select("*").order("created_at",{ascending:!1}).limit(100);if(t)throw t;c(r||[])}catch(r){console.error("âŒ Refresh inbox error:",r.message),a(r.message||"Failed to load inbox")}finally{l(!1)}},[]),j=o.useCallback(async()=>{try{const r=localStorage.getItem("sent_emails"),t=r?JSON.parse(r):[];p(t)}catch(r){console.error("âŒ Refresh sent error:",r.message)}},[]),v=o.useCallback(async({to:r,subject:t,html:d})=>{try{if(l(!0),a(""),m(""),!r||!t||!d)throw new Error("All fields are required");await P({to:r,subject:t,html:d});const u={id:`sent_${Date.now()}`,to:r,subject:t,html:d,timestamp:new Date().toISOString(),status:"sent"},N=localStorage.getItem("sent_emails"),w=N?JSON.parse(N):[];return w.unshift(u),localStorage.setItem("sent_emails",JSON.stringify(w)),p(w),m(`âœ“ Email sent successfully to ${r}`),u}catch(u){throw console.error("âŒ Send email error:",u.message),a(u.message||"Failed to send email"),u}finally{l(!1)}},[]),n=o.useCallback(async r=>{try{l(!0),await V(r),c(t=>t.map(d=>d.id===r?{...d,status:"processed"}:d)),m("Email marked as read")}catch(t){console.error("âŒ Mark as read error:",t.message),a(t.message||"Failed to mark email as read")}finally{l(!1)}},[]),g=o.useCallback(async r=>{try{l(!0);const{error:t}=await S.from("inbound_emails").delete().eq("id",r);if(t)throw t;c(d=>d.filter(u=>u.id!==r)),m("Email deleted")}catch(t){console.error("âŒ Delete email error:",t.message),a(t.message||"Failed to delete email")}finally{l(!1)}},[]);return o.useEffect(()=>{y(),j();const r=S.channel("inbound_emails_realtime").on("postgres_changes",{event:"*",schema:"public",table:"inbound_emails"},t=>{t.eventType==="INSERT"?(c(d=>[t.new,...d]),m(`ðŸ“¨ New email: ${t.new.subject}`)):t.eventType==="UPDATE"?c(d=>d.map(u=>u.id===t.new.id?t.new:u)):t.eventType==="DELETE"&&c(d=>d.filter(u=>u.id!==t.old.id))}).subscribe(t=>{});return()=>{S.removeChannel(r)}},[y,j]),o.useEffect(()=>{if(b||h){const r=setTimeout(()=>{a(""),m("")},5e3);return()=>clearTimeout(r)}},[b,h]),{emails:i,sentEmails:s,loading:f,error:b,success:h,sendEmail:v,markAsRead:n,deleteEmail:g,refreshInbox:y}}const A=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8m0 8l-4-2m4 2l4-2"})}),Q=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),E=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),G=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),B=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),z=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),R=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),K=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),X=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),I=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),T=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),Z=({isOpen:i,onClose:c,onSend:s,isLoading:p})=>{const[f,l]=o.useState(""),[b,a]=o.useState(""),[h,m]=o.useState(""),[y,j]=o.useState(""),v=async n=>{if(n.preventDefault(),j(""),!f.trim()||!b.trim()||!h.trim()){j("All fields are required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f)){j("Invalid email address");return}try{await s({to:f.trim(),subject:b.trim(),html:`<div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">${h.trim().replace(/\n/g,"<br>")}</div>`}),l(""),a(""),m("")}catch(g){j(g.message)}};return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:n=>n.target===n.currentTarget&&c(),children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-primary border-b border-secondary p-4 sm:p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"text-basic"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-secondary",children:"Compose Email"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-secondary hover:bg-opacity-10 rounded-sm transition-all","aria-label":"Close",children:e.jsx(B,{className:"text-secondary"})})]}),e.jsxs("form",{onSubmit:v,className:"p-4 sm:p-6 space-y-4",children:[y&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-sm",children:e.jsx("p",{className:"text-sm text-red-800",children:y})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary mb-2 uppercase opacity-70 tracking-wider",children:"To"}),e.jsx("input",{type:"email",value:f,onChange:n=>l(n.target.value),placeholder:"recipient@example.com",disabled:p,className:"w-full px-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm disabled:bg-gray-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary mb-2 uppercase opacity-70 tracking-wider",children:"Subject"}),e.jsx("input",{type:"text",value:b,onChange:n=>a(n.target.value),placeholder:"Email subject",disabled:p,className:"w-full px-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm disabled:bg-gray-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary mb-2 uppercase opacity-70 tracking-wider",children:"Message"}),e.jsx("textarea",{value:h,onChange:n=>m(n.target.value),placeholder:"Type your message here...",rows:8,disabled:p,className:"w-full px-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm disabled:bg-gray-100 resize-none",required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-secondary",children:[e.jsx("button",{type:"button",onClick:c,disabled:p,className:"flex-1 py-3 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-secondary hover:bg-opacity-5 disabled:opacity-50 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 py-3 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:"sm"})," Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{})," Send"]})})]})]})]})}):null},Y=({isOpen:i,onClose:c,email:s,onMarkRead:p,onDelete:f,isLoading:l})=>{const[b,a]=H.useState(s?.status==="processed"),h=n=>new Date(n).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"UTC"}),m=n=>{if(!n)return"0 B";const g=1024,r=["B","KB","MB","GB"],t=Math.floor(Math.log(n)/Math.log(g));return Math.round(n/Math.pow(g,t)*100)/100+" "+r[t]},y=async()=>{s?.id&&!b&&(await p(s.id),a(!0))},j=async()=>{s?.id&&window.confirm("Are you sure you want to delete this email?")&&(await f(s.id),c())};if(!i||!s)return null;const v=s.attachments&&s.attachments.length>0;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:n=>n.target===n.currentTarget&&c(),children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-lg max-w-4xl w-full my-8",children:[e.jsxs("div",{className:"sticky top-0 bg-primary border-b border-secondary p-4 sm:p-6 flex justify-between items-start sm:items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-secondary truncate",children:s.subject}),e.jsx("p",{className:"text-xs sm:text-sm text-secondary opacity-60 mt-1",children:s.message_id})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-secondary hover:bg-opacity-10 rounded-sm transition-all flex-shrink-0","aria-label":"Close",children:e.jsx(B,{className:"text-secondary"})})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-6 overflow-y-auto max-h-[calc(100vh-200px)]",children:[e.jsxs("div",{className:"space-y-4 pb-4 border-b border-secondary",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary opacity-70 font-semibold text-sm uppercase tracking-wider flex-shrink-0",children:[e.jsx(I,{}),"From:"]}),e.jsx("div",{className:"flex flex-col",children:e.jsx("p",{className:"text-sm sm:text-base font-semibold text-secondary break-all",children:s.from_address})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary opacity-70 font-semibold text-sm uppercase tracking-wider flex-shrink-0",children:[e.jsx(I,{}),"To:"]}),e.jsx("div",{className:"flex flex-col",children:e.jsx("p",{className:"text-sm sm:text-base font-semibold text-secondary break-all",children:s.to_address})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary opacity-70 font-semibold text-sm uppercase tracking-wider flex-shrink-0",children:[e.jsx(X,{}),"Date:"]}),e.jsx("p",{className:"text-sm sm:text-base text-secondary",children:h(s.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider ${s.status==="processed"?"bg-green-100 text-green-700":s.status==="received"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:s.status==="processed"?"âœ“ Read":s.status==="received"?"Unread":"Error"}),s.is_spam&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider bg-yellow-100 text-yellow-700",children:"âš  Spam"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase opacity-70 tracking-wider",children:"Message"}),e.jsx("div",{className:"bg-secondary bg-opacity-5 border border-secondary rounded-sm p-4 min-h-[200px] max-h-[400px] overflow-y-auto",children:s.html_body?e.jsx("div",{className:"prose prose-sm max-w-none text-secondary",dangerouslySetInnerHTML:{__html:s.html_body}}):s.body?e.jsx("p",{className:"text-sm text-secondary whitespace-pre-wrap break-words",children:s.body}):e.jsx("p",{className:"text-sm text-secondary opacity-50",children:"No message content"})})]}),v&&e.jsxs("div",{className:"space-y-3 pb-4 border-t border-secondary pt-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-secondary uppercase opacity-70 tracking-wider flex items-center gap-2",children:[e.jsx(T,{})," Attachments (",s.attachments.length,")"]}),e.jsx("div",{className:"space-y-2",children:s.attachments.map((n,g)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-secondary bg-opacity-5 border border-secondary rounded-sm hover:bg-opacity-10 transition-colors",children:[e.jsx(T,{className:"text-basic flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-secondary truncate",children:n.filename||`Attachment ${g+1}`}),n.size&&e.jsx("p",{className:"text-xs text-secondary opacity-60",children:m(n.size)})]})]},g))})]}),e.jsxs("div",{className:"space-y-2 pb-4 border-t border-secondary pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase opacity-70 tracking-wider",children:"Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Email ID"}),e.jsx("p",{className:"text-secondary font-mono break-all",children:s.message_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Received At"}),e.jsx("p",{className:"text-secondary",children:new Date(s.created_at).toLocaleString()})]}),s.processed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Processed At"}),e.jsx("p",{className:"text-secondary",children:new Date(s.processed_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-secondary opacity-60",children:"Status"}),e.jsx("p",{className:"text-secondary capitalize",children:s.status})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-primary border-t border-secondary p-4 sm:p-6 flex gap-3 flex-wrap",children:[!b&&e.jsxs("button",{onClick:y,disabled:l,className:"flex-1 min-w-[120px] py-3 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(z,{})," Mark as Read"]}),e.jsxs("button",{onClick:j,disabled:l,className:"flex-1 min-w-[120px] py-3 px-4 border border-red-500 text-red-600 font-semibold rounded-sm hover:bg-red-50 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(R,{})," Delete"]}),e.jsx("button",{onClick:c,className:"flex-1 min-w-[120px] py-3 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-secondary hover:bg-opacity-5 transition-all",children:"Close"})]})]})})},ee=({email:i,isReceived:c,onMarkRead:s,onDelete:p,onViewDetails:f,isLoading:l})=>{const b=h=>{const m=new Date(h),y=new Date;return m.toDateString()===y.toDateString()?m.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):m.toLocaleDateString("en-US",{month:"short",day:"numeric"})},a=c&&i.status==="received";return e.jsx("div",{className:`p-4 border-b border-secondary hover:bg-secondary hover:bg-opacity-5 transition-colors ${a?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[c&&e.jsx("button",{onClick:()=>s(i.id),disabled:l,className:`mt-1 w-5 h-5 rounded border-2 flex items-center justify-center transition-all flex-shrink-0 ${a?"border-basic bg-basic":"border-secondary bg-transparent"}`,"aria-label":"Mark as read",children:!a&&e.jsx(z,{})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>f(i),children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-1",children:[e.jsx("p",{className:`text-sm sm:text-base font-semibold truncate ${a?"text-basic":"text-secondary"}`,children:c?i.from_address:i.to}),e.jsx("p",{className:"text-xs text-secondary opacity-60",children:b(i.created_at)})]}),e.jsx("p",{className:`text-sm truncate ${a?"font-semibold text-secondary":"text-secondary opacity-70"}`,children:i.subject}),i.body&&e.jsxs("p",{className:"text-xs text-secondary opacity-50 truncate mt-1",children:[i.body.substring(0,100),"..."]})]}),c&&e.jsx("button",{onClick:()=>p(i.id),disabled:l,className:"p-2 text-secondary opacity-60 hover:opacity-100 hover:bg-red-50 hover:text-red-600 rounded-sm transition-all flex-shrink-0","aria-label":"Delete",children:e.jsx(R,{})})]})})};function oe(){const i=F(),[c,s]=o.useState(!1),[p,f]=o.useState(!1),[l,b]=o.useState(""),[a,h]=o.useState("inbox"),[m,y]=o.useState(!1),[j,v]=o.useState(!1),[n,g]=o.useState(null),[r,t]=o.useState(""),{emails:d,sentEmails:u,loading:N,error:w,success:L,sendEmail:$,markAsRead:M,deleteEmail:D}=J();if(o.useEffect(()=>{if(!O()){i("/user/admin/auth/login",{replace:!0});return}s(!0);const k=sessionStorage.getItem("admin_email")||"admin@example.com";b(k)},[i]),!c)return e.jsx("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:e.jsx(C,{size:"lg"})});const _=(a==="inbox"?d:u).filter(x=>{const k=r.toLowerCase();return(a==="inbox"?x.from_address:x.to).toLowerCase().includes(k)||x.subject.toLowerCase().includes(k)||x.body&&x.body.toLowerCase().includes(k)}),W=x=>{g(x),v(!0)};return e.jsxs("div",{className:"min-h-screen bg-primary",children:[e.jsx(U,{adminEmail:l,onMenuToggle:()=>f(!p)}),e.jsxs("div",{className:"flex",children:[e.jsx(q,{isOpen:p,onClose:()=>f(!1)}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"container mx-auto max-w-6xl px-4 sm:px-6 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-secondary mb-2 flex items-center gap-3",children:[e.jsx(E,{className:"text-basic"})," Email Manager"]}),e.jsx("p",{className:"text-sm text-secondary opacity-70",children:"Send and manage your emails"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"w-full sm:w-auto py-3 px-6 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(G,{})," Compose"]})]}),w&&e.jsxs("div",{className:"mb-6 p-4 sm:p-6 bg-red-50 border-l-4 border-red-500 rounded-sm",children:[e.jsx("p",{className:"text-sm text-red-800 font-semibold",children:"Error"}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:w})]}),L&&e.jsxs("div",{className:"mb-6 p-4 sm:p-6 bg-green-50 border-l-4 border-green-500 rounded-sm",children:[e.jsx("p",{className:"text-sm text-green-800 font-semibold",children:"Success"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:L})]}),e.jsxs("div",{className:"mb-8 flex gap-2 border-b border-secondary",children:[e.jsxs("button",{onClick:()=>{h("inbox"),t("")},className:`py-3 px-4 sm:px-6 font-semibold text-sm border-b-2 transition-all flex items-center gap-2 ${a==="inbox"?"border-basic text-basic":"border-transparent text-secondary hover:text-basic"}`,children:[e.jsx(Q,{})," Inbox",d.filter(x=>x.status==="received").length>0&&e.jsx("span",{className:"text-xs bg-basic text-primary rounded-full px-2 py-1",children:d.filter(x=>x.status==="received").length})]}),e.jsxs("button",{onClick:()=>{h("sent"),t("")},className:`py-3 px-4 sm:px-6 font-semibold text-sm border-b-2 transition-all flex items-center gap-2 ${a==="sent"?"border-basic text-basic":"border-transparent text-secondary hover:text-basic"}`,children:[e.jsx(A,{})," Sent (",u.length,")"]})]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx(K,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-secondary opacity-60 w-5 h-5"}),e.jsx("input",{type:"text",value:r,onChange:x=>t(x.target.value),placeholder:`Search ${a==="inbox"?"inbox":"sent"} emails...`,className:"w-full pl-12 pr-4 py-3 border border-secondary rounded-sm focus:outline-none focus:ring-2 focus:ring-basic focus:ring-opacity-30 text-sm"})]}),N&&a==="inbox"?e.jsx("div",{className:"flex justify-center py-16",children:e.jsx(C,{size:"lg"})}):_.length===0?e.jsxs("div",{className:"bg-primary border border-secondary rounded-sm p-12 text-center",children:[e.jsx(E,{className:"w-12 h-12 text-secondary opacity-30 mx-auto mb-4"}),e.jsx("p",{className:"text-secondary opacity-70",children:r?"No emails match your search":`No ${a} emails`})]}):e.jsx("div",{className:"bg-primary border border-secondary rounded-sm shadow-md overflow-hidden",children:_.map(x=>e.jsx(ee,{email:x,isReceived:a==="inbox",onMarkRead:M,onDelete:D,onViewDetails:W,isLoading:N},x.id))})]})})]}),e.jsx(Z,{isOpen:m,onClose:()=>y(!1),onSend:$,isLoading:N}),e.jsx(Y,{isOpen:j,onClose:()=>{v(!1),g(null)},email:n,onMarkRead:M,onDelete:D,isLoading:N})]})}export{oe as default};
