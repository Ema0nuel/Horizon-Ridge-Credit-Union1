import{u as w,r as a,s as x,j as e,a as k}from"./index-nw5vX4eR.js";import{U as C}from"./UserHeader-LSGpS8F-.js";import{h as S}from"./authService-BzjFe2h-.js";import"./api-CBahbCmN.js";const z=()=>e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h4m4 0h4M5 21h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z"})}),m=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),L=()=>e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),M=()=>e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 2.54L19 6.25v4.75c0 5.23-3.66 9.79-7 11-3.34-1.21-7-5.77-7-11V6.25l7-2.71z"})}),p=()=>e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),A=()=>e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),_=()=>e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),q=({isOpen:s,onClose:r})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"feature-modal-title",children:e.jsxs("div",{className:"bg-primary rounded-sm border border-secondary shadow-2xl max-w-md w-full p-6 sm:p-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"text-6xl",children:"ðŸŒ"})}),e.jsx("h2",{id:"feature-modal-title",className:"text-2xl font-bold text-secondary text-center mb-3",children:"Feature Not Available"}),e.jsx("p",{className:"text-secondary text-center mb-2 opacity-80",children:"Virtual bank cards are not yet available in your region."}),e.jsx("p",{className:"text-secondary text-center text-sm opacity-70 mb-6",children:"We're actively expanding our services. Check back soon or contact support for more information."}),e.jsxs("div",{className:"bg-blue-50 rounded-sm p-4 border border-blue-200 mb-6",children:[e.jsx("p",{className:"text-blue-900 text-xs font-semibold mb-2",children:"ðŸ“§ Contact Support:"}),e.jsx("p",{className:"text-blue-800 text-sm",children:"support@horizonridgecreditunion.com"})]}),e.jsx("button",{onClick:r,className:"w-full py-2 px-4 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95",children:"Close"})]})}):null,B=({account:s,profile:r,onRequestCard:c})=>e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"bg-gradient-to-br from-basic via-basic to-secondary rounded-sm p-6 sm:p-8 text-primary shadow-lg hover:shadow-xl transition-shadow cursor-pointer h-64 sm:h-72 flex flex-col justify-between overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 opacity-10 w-40 h-40",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full","aria-hidden":"true",children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:"white",strokeWidth:"1"}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"white",strokeWidth:"1"}),e.jsx("circle",{cx:"100",cy:"100",r:"40",fill:"none",stroke:"white",strokeWidth:"1"})]})}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70 font-semibold tracking-wider uppercase",children:"Virtual Bank Card"}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold mt-1",children:r?.full_name||"Cardholder"})]}),e.jsx(z,{})]})}),e.jsx("div",{className:"relative z-10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs opacity-70 tracking-wider uppercase mb-2",children:"Account Number"}),e.jsx("p",{className:"text-lg sm:text-xl font-mono font-bold tracking-wider",children:s?.account_number?.slice(-8).padStart(8,"*")||"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-70 tracking-wider uppercase mb-1",children:"Card Status"}),e.jsxs("p",{className:"font-semibold flex items-center gap-2",children:[e.jsx(p,{}),"Active"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-70 tracking-wider uppercase mb-1",children:"Expires"}),e.jsx("p",{className:"font-mono font-semibold",children:"12/28"})]})]})})]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all rounded-sm flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("button",{onClick:c,className:"py-2 px-6 bg-white text-basic font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95 flex items-center gap-2",children:[e.jsx(m,{}),"Request Physical Card"]})})]}),I=({onRequestCard:s})=>e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-sm border border-secondary border-dashed",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’³"}),e.jsx("h3",{className:"text-xl font-bold text-secondary mb-2",children:"No Cards Yet"}),e.jsx("p",{className:"text-secondary opacity-70 mb-6",children:"Get started with a virtual bank card"}),e.jsxs("button",{onClick:s,className:"py-2 px-6 bg-basic text-primary font-semibold rounded-sm hover:bg-opacity-90 transition-all active:scale-95 inline-flex items-center gap-2",children:[e.jsx(m,{}),"Request Card"]})]}),F=()=>e.jsxs("div",{className:"mt-12 bg-primary rounded-sm border border-secondary shadow-md p-6 sm:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary mb-6",children:"Card Features"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 text-basic",children:e.jsx(M,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary mb-1",children:"Secure & Protected"}),e.jsx("p",{className:"text-sm text-secondary opacity-70",children:"Advanced encryption and fraud detection to keep your money safe"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 text-basic",children:e.jsx(A,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary mb-1",children:"Instant Activation"}),e.jsx("p",{className:"text-sm text-secondary opacity-70",children:"Get your virtual card immediately and start using it online"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 text-basic",children:e.jsx(_,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary mb-1",children:"Full Control"}),e.jsx("p",{className:"text-sm text-secondary opacity-70",children:"Manage spending limits, pause, or freeze your card anytime"})]})]})]})]});function W(){const s=w(),[r,c]=a.useState(null),[h,b]=a.useState(null),[l,j]=a.useState([]),[y,f]=a.useState(!0),[v,u]=a.useState(!1);a.useEffect(()=>{let d=!0;return(async()=>{try{const{data:{session:o}={}}=await x.auth.getSession(),i=o?.user?.id;if(!i){s("/auth/login",{replace:!0});return}c(i);const{data:g}=await x.from("user_profiles").select("*").eq("id",i).eq("is_deleted",!1).maybeSingle(),{data:N}=await x.from("accounts").select("*").eq("user_id",i).eq("is_deleted",!1).order("created_at",{ascending:!1});d&&(b(g),j(N||[]))}catch(o){console.error("[CARDS] Load error:",o)}finally{d&&f(!1)}})(),()=>{d=!1}},[s]);const n=()=>{u(!0)};if(y)return e.jsx("div",{className:"min-h-screen bg-primary flex items-center justify-center",children:e.jsx(k,{size:"lg"})});if(!r)return null;const t=l&&l.length>0?l[0]:null;return e.jsxs("div",{className:"min-h-screen bg-primary",children:[e.jsx(C,{handleSignOut:()=>S(s),profile:h}),e.jsxs("main",{className:"container mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-2 text-xs sm:text-sm text-secondary opacity-70",children:[e.jsx("button",{onClick:()=>s("/dashboard"),className:"hover:opacity-100 font-bold",children:"Dashboard"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-semibold opacity-100",children:"Cards"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-secondary mb-2",children:"Virtual Bank Cards"}),e.jsx("p",{className:"text-sm sm:text-base text-secondary opacity-70",children:"Manage your digital cards and spending"})]}),e.jsx("div",{className:"mb-8 p-4 sm:p-6 rounded-sm border-l-4 border-blue-500 bg-blue-50 text-blue-800",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Coming Soon to Your Region"}),e.jsx("p",{className:"text-sm opacity-90",children:"Virtual bank cards will be available in your region very soon. Stay tuned for updates!"})]})]})}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-secondary mb-6",children:"Your Cards"}),t?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(B,{account:t,profile:h,onRequestCard:n}),e.jsx("div",{className:"bg-primary rounded-sm border border-secondary shadow-md p-6 sm:p-8 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-secondary mb-6",children:"Primary Card"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 uppercase tracking-wider font-semibold mb-2",children:"Linked Account"}),e.jsx("p",{className:"text-secondary font-semibold text-base",children:t.account_number}),e.jsx("p",{className:"text-xs text-secondary opacity-70 mt-1",children:t.account_type==="savings"?"Savings Account":"Checking Account"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 uppercase tracking-wider font-semibold mb-2",children:"Currency"}),e.jsx("p",{className:"text-secondary font-semibold text-base",children:t.currency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 uppercase tracking-wider font-semibold mb-2",children:"Card Status"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-100 text-green-800",children:[e.jsx(p,{}),e.jsx("span",{className:"text-sm font-semibold",children:"Active"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-secondary opacity-70 uppercase tracking-wider font-semibold mb-2",children:"Daily Spending Limit"}),e.jsxs("p",{className:"text-secondary font-bold text-lg",children:[t.currency," ",parseFloat(t.daily_transaction_limit||1e4).toFixed(2)]})]}),e.jsx("div",{className:"pt-4 border-t border-secondary",children:e.jsxs("button",{onClick:n,className:"w-full py-3 px-4 border border-secondary text-secondary font-semibold rounded-sm hover:bg-gray-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(m,{}),"Request Physical Card"]})})]})]})})]}):e.jsx(I,{onRequestCard:n})]}),e.jsx(F,{})]}),e.jsx(q,{isOpen:v,onClose:()=>u(!1)})]})}export{W as CardsPage,W as default};
